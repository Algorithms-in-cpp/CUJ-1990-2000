



<HTML><HEAD>

<TITLE>January 1997/Platform-Independent C++ GUI Toolkits/Listing 1</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4>Listing 1:	Startup method for Tetris game</h4>

<pre>

// These brushes are global and shared by a few objects.
wxBrush *brushes[10];

wxFrame *TrisApp::OnInit(void) {
  // Seed random number generator based on current time.
  time_t tm;
  tm = time(NULL);
  srand(tm);

  // Create the base frame for the application.
  appFrame = new TrisFrame(NULL);

  // Create the menu.
  wxMenu *fileMenu = new wxMenu;
  fileMenu-&gt;Append(WXTRIS_MENU_START, "&amp;Start", "Start a new game");
  fileMenu-&gt;Append(WXTRIS_MENU_HIGHSCORES, "&amp;High Scores",
                   "Show high scores");
  fileMenu-&gt;Append(WXTRIS_MENU_QUIT, "E&amp;xit", "Quit wxTris");
  appFrame-&gt;menuBar = new wxMenuBar;
  appFrame-&gt;menuBar-&gt;Append(fileMenu, "&amp;File");
  appFrame-&gt;SetMenuBar(appFrame-&gt;menuBar);

  // Set up colors. These will be used for the duration of the game.
  wxColor c1("BLACK");
  wxColor c2("RED");
  ...
  wxColor c9("GREY");

  // trisBLACK .. trisGREY are enumerated starting from 0.
  brushes[trisBLACK] = new wxBrush(c1, wxSOLID);
  brushes[trisRED] = new wxBrush(c2, wxSOLID);
  ...
  brushes[trisGREY] = new wxBrush(c9, wxSOLID);

  // Create the playing field.
  field = new TrisField(appFrame);

  gameState = NO_GAME;

  appFrame-&gt;Show(TRUE);
  return appFrame;
}
//End of File
</pre>
</body></html>
