<HTML><HEAD>
<TITLE>July 1993/Stepping Up to C++/Listing 7</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 7 <I>Tracks the number of list objects in existence at any given time in the execution of the program</I></A></h4>
<pre>//
// list.cpp - list implementation using a nested class
// with global variables counting the objects
//

#include &lt;stdio.h&gt;

#include "list.h"

unsigned list_count = 0;

list::list(unsigned n)
       {
       first = last = new node (n, 0);
       ++list_count;
       }

list::~list()
       {
       node *p;
       while ((p = first) != 0)
              {
              first = first-&gt;next;
              delete p;
              }
       --list_count;
       }

void list::add(unsigned n)
       {
       if (last-&gt;number != n)
              last = last-&gt;next = new node (n, 0);
       }

void list::print()
       {
       for (node *p = first; p != 0; p = p-&gt;next)
              printf("%4u ", p-&gt;number);
       }

// End of File
</pre>
</BODY>
</HTML>
