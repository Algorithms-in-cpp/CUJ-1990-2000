<HTML><HEAD>
<TITLE>April 1993/Mixed Numbers in C/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2 mixcalc.c - <I>a rational number calculator</I></A></h4>
<pre>/* mixcalc.c */
/* Copyright 1992 by P.J. LaBrocca */

#include "mixed.h"
#include "mixcalc.h"
#include &lt;stdio.h&gt;

#ifdef __ZTC__          /* For Zortech Compiler */
      _stack = 15000;
#endif

enum token_value curr_tok;

void main()
{
    mixed_t ans;
       mixed_t work;

       init_primes();

       mix_clear( &amp;ans );
       mix_init( &amp;work, 3, 1, 7 );

    setjmp( startup );
    M = &amp;work;
    while(1) {
              printf("&gt; ");
       curr_tok = gettok();
              if(curr_tok == END) {
           break;
       }
              if(curr_tok == PRINT)
                     continue;
       ans = expr( );

              mix_print( mix_reduce( &amp;ans) );
    }
}

/* End of File */
</pre>
</BODY>
</HTML>
