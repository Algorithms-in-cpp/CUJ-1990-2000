<HTML><HEAD>
<TITLE>August 1995/Fixed-Point C for Graphics Applications/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 <I>Iterative, fixed-point line routine</A></I></h4>
<pre>/*

   This function relies on the Borland graphics library
*/


#include &lt;graphics.h&gt;


#define FixedPointShiftAmount 8

#define FPToInteger( FP ) ( FP &gt;&gt; FixedPointShiftAmount )
#define IntegerToFP( Integer ) ( Integer &lt;&lt; FixedPointShiftAmount )


typedef long FixedPnt;

void IterativeLine( short x1, short y1, short x2, short y2 )
{

   /* This dt gives 128 steps */
   FixedPnt t, dt = 1 &lt;&lt; ( FixedPointShiftAmount - 6 );
   FixedPnt x, y, dx, dy;

   /* Compute FixedPnt deltas */
   dx = ( x2 - x1 ) *dt;
   dy = (y2 - y1 ) * dt;

   /* Initial values */
   x = IntegerToFP((long) x1 );
   y = IntegerToFP((long) y1 );

   putpixel( x1, y1, 15 );

   for( t = 0; t &lt; IntegerToFP( 1 ); t += dt )
   {

      X += dx;
      y += dy;

      putpixel( FPToInteger( x ), FPToInteger( y ), 14 );
   }
}
/* End of File */
</pre>
</BODY>
</HTML>
