<HTML><HEAD>
<TITLE>June 1994/float-Precision Math Library/Listing 11</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 11 tanhf<I> function</I></A></h4>
<pre>/* tanhf function */
#include "xmath.h"

float (tanhf) (float x) {
   double xx = x, x2, evens;
   float minthreshold = -M_LN2 / 2;
   /* Exp(x) = (evens+odds)/(evens - odds) ; tanh(x) =
    * (exp(2x)-1)/(exp(2x+l) */
   if (x &lt;= (float) (M_LN2 / 2) &amp;&amp; x &gt;= minthreshold) {
      /* Derived from rational e approx */
      xx *= 60.09114349 + (x2 = xx * xx);
      evens = 120.18228722 + x2 * 12.01517514;
      return (xx + xx) * evens / (evens * evens + xx * xx);
   }
   xx += xx
   if (x != x) {
      errno = EDOM;
      return x;
   }
   if (_Expf(&amp;xx) &lt; FLT_MANT_DIG)
      /* Promote final calc to double */
      return (xx - 1) / (xx + 1);
   return 1; /* large x */
}

/* End of File */</pre>
</BODY>
</HTML>
