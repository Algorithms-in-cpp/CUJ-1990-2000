<HTML><HEAD>
<TITLE>June 1994/Stepping Up To C++/Listing 11</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 11 <I>Corrections to the corrections to the string class that appeared in <a href="list9.htm">Listing 9</a> of "Stepping Up to C++: Rewriting and Reconsidering," CUJ, September, 1993.</I></A></h4>
<pre>//
// append a nul-terminated string to a str
//
void str::cat(const char *s)
   {
   size_t n = len + strlen(s) + 1;
   char *p = strcpy(new char[len], ptr);
   strcat(p, s);
   delete [] ptr;
   ptr = p;
   len = n - 1;  // the - 1 was missing
   }

//
// append a str to a str
//
void str::cat(const str &amp;s)
   {
   size_t n = len + s.len + 1;
   char *p = strcpy(new char[len], ptr);
   strcat(p, s.ptr);
   delete [] ptr;
   ptr = p;
   len = n - 1;  // the - 1 was missing
   }

// End of File
</pre>
</BODY>
</HTML>
