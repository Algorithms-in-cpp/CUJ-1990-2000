






<HTML>
     
     <HEAD>


          
          <TITLE>October 1996/C++: The Making of a Standard/Listing 1</TITLE>
     </HEAD>
     
     <BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
          
          <h4>Listing 1: Using templates with the inclusion model</h4>

<PRE>

// sum.c:

#define INCR 2
void trace(void*);
static int count;

template&lt;class T&gt; T sum(vector&lt;T&gt;&amp; v)
{
    count += INCR;
    trace(v);
    T r = 0;
    for (int i = 0; i &lt; v.size(); i++)
        r += v[i];
}

// user.c (inclusion style)

#define trace my_tracer
#define INCR(v) (v)++
extern int count;

#include "sum.c"

void g(vector&lt;int&gt;&amp; vi)
{
    int s = sum(vi);
}
// End of File
</PRE>
     </BODY>
</HTML>
