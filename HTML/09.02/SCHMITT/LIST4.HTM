<HTML><HEAD>
<TITLE>February 1991/Reviving The UNIX sbrk Function/Listing 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 4 Test Program</A></h4>
<pre>void main (void)
{
char b[32];                               // Buffer for user input
int size;                                 // Symbol size
int i;                                    // Loop counter
union                                     // Space for test symbol
  {
  SYMBOL x;
  char y[sizeof(SYMBOL)+255];
  } sym;

memset(&amp;sym,0,sizeof(sym));               // Clear symbol area
printf("Symbol size? ");                  // Get symbol size from user
gets(b);
size = atoi(b);
if(size &lt; 0) size = 0;                    // Make sure size is in bounds
if(size &gt; 255) size = 255;
memset(sym.x.symbol,'X',size);            // Set symbol to X's

for(i = 0; savesym(&amp;sym.x) != NULL; i++); // Allocate all memory
printf("\n%d symbols allocated\n",i);     // Print number of symbols
}
</pre>
</BODY>
</HTML>
