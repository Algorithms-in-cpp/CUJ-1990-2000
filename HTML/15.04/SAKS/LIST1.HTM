



<HTML><HEAD>

<TITLE>April 1997/C++ Theory and Practice/Listing 1</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4>Listing 1:	A perverse program that uses placement new to alter a
logically-const string object. This is not recommended</h4>

<pre>
//  Tested using:
//      Borland C++ 5.0
//      Microsoft Visual C++ 4.2

#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;string&gt;

#ifdef __BORLANDC__
using namespace std;
#endif

void const *
operator new(size_t, void const *p) throw()
    {
    return p;
    }

int main()
    {
    string const name = "Ben";
    cout &lt;&lt; name &lt;&lt; '\n';
    name.string::~string();
    new (&amp;name) string ("Jeremy");
    cout &lt;&lt; name &lt;&lt; '\n';
    return 0;
    }

/* End of File */
</pre>
</body></html>
