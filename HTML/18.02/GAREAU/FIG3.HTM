<HTML><HEAD>
<TITLE>February 2000/Tracking Memory Leaks under Windows CE/Figure 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 3: The information structure and map type used to keep track of allocated blocks</A></h4>
<pre>
struct SMEMALLOC
{
   LPVOID      pAddr;       // Allocated address via malloc()
   size_t      nSize;       // Block size
   const char* pszFilename; // Filename
   int         nLine;       // Line number
};

typedef SMEMALLOC *  LPMEMALLOC;

// Build a SMEMALLOC map type, where each item associates an 
// address returned by malloc() to a description of the statement 
// allocating memory.

typedef CTypedPtrMap&lt;CMapPtrToPtr, LPVOID, LPMEMALLOC&gt; CAddrMap;

</pre></body></html>
