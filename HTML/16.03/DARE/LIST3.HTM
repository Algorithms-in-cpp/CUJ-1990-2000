


<HTML><HEAD>

<TITLE>March 1998/Contrast Enhancement with Piecewise Lookup Tables/Listing 3</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4>
<A name="HEADING1">Listing 3: The ImagePointLut class</A></h4>


<pre>
////////////////////////////////////////////////////////////
//    File: iplut.hpp
//    Description: ImagePoinLut - point lookup table 
//
//    Author: C Dare-Edwards
//      Copyright Conrad Dare-Edwards 1997  

typedef  ImageTList&lt;ImagePoint&gt; ImagePList;

class ImagePointLut : public ImageLut
{
      public:
       enum colour { RED, GREEN, BLUE };
  
    // constructors
      ImagePointLut( void );                        
      ImagePointLut( const ImagePointLut&amp; newlut );    
      ImagePointLut( const ImagePList&amp; newpoints  );    
  
        // histogram equalisation ( produces a lot of points )    
      void Equalise( const ImageHist&amp; hist );     
  
     // invert the y and or the x  axis
      void Invert( BOOL xaxis = FALSE, BOOL yaxis = TRUE ); 
  
      // Minimum to Maximum routines
     void SetMinToMax( int min, int max,  colour type = RED);    
      void SetMinToMax( const ImageHist&amp; hist, colour type =RED); 

    // optimize the mimimum and maximum 
    void OptimiseMinMax(const ImageHist&amp; hist,int&amp; min,int&amp; max); 
      
    // three point optimized lookup table
    void Optimise( const ImageHist&amp; hist, colour type =RED);    
    
    // logorithmic curve between points
      void SetLog( const ImageHist&amp; hist );       
      void SetLog( int min, int max );      

     // exponential curve between points
      void SetExp( const ImageHist&amp; hist );      
      void SetExp( int min, int max );    
    
    // compute new table from list
      void Update( BOOL tidy = FALSE);  

    void BuildPointList( void );

      private:
    // check and sort list
    void SortPointList( void ); 
      // tidy up list removing redundant points 
    void TidyPointList( void );        
 
    // the point list
      ImagePList m_PointList; 
};
//End of File
</pre>
</body></html>
