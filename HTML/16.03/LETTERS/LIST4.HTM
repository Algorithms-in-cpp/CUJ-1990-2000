


<HTML><HEAD>

<TITLE>March 1998/New Products/Listing 4</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4>
<A name="HEADING1">Listing 4: main.c</A></h4>
<pre>
#include
&lt;Rcvr.h&gt;
#include &lt;Rcvr_a.h&gt;
#include &lt;Rcvr_b.h&gt;
#include &lt;Rcvr_c.h&gt;
     
/* This declares functions needed for getting 
   command input and returning responses */
#include &lt;comm_funcs.h&gt;
     
#define NUM_RCVRS 3
     
Rcvr *receiver[NUM_RCVRS];
     
int main()
{
  char *inBuf;
  int   rIndex;
  int   cmdCode;
  char *args;
  int   ret;
  float freq;
     
  receiver[0] = newRcvr_a(0);
  receiver[1] = newRcvr_b(0);
  receiver[2] = newRcvr_c(0);
     
  while(1)
  {
    inBuf = getCommandInput();
     
    /* parse inBuf to rIndex, cmdCode, args */
     
    switch(cmdCode)
    {
    case SET_FREQ:
      ret = receiver[rIndex]-&gt;
        setFreq(receiver[rIndex], args);
      sendResponse(ret);
      break;
     
    case GET_FREQ:
      freq = receiver[rIndex]-&gt;
        getFreq(receiver[rIndex]);
      sendFreq(freq);
      break;
     
    /* etc */
     
    }
     
    free(inBuf);
  }
}
/* End of File */
</pre>
</body></html>
