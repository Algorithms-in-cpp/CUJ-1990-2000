<HTML><HEAD>
<TITLE>April 1994/Code Capsules/Listing 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 4 <I>Illustrates recursion and storage duration</I></A></h4>
<pre>/* recurse.c */

#include &lt;stdio.h&gt;

main()
{
   long n;
   long fac(long);
   
   fputs("Enter a small integer: ",stderr);
   scanf("%ld%*c",&amp;n);
   printf("\n%ld! = %ld\n",n,fac(n));
   return 0;
}

long fac(long n)
{
   static int depth = 0;
   auto long result;
   void print_current(int,long);
   
   print_current(++depth,n);
   result = (n &lt;= 1) ? i : n * fac(n-1);
   print_current(depth--,result);
   
   return result;
}

void print_current(int depth, long n)
{
   int i;
   
   /* Indent to show depth */
   for (i = 0; i &lt; depth; ++i)
      fputs(" ",stdout);
   
   printf("%ld\n",n);
}

/* Output:
Enter a small integer: 3
  3
     2
       1
       1
     2
  6

3! = 6
*/

/* End of File */
</pre>
</BODY>
</HTML>
