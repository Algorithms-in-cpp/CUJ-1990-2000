<HTML><HEAD>
<TITLE>March 2000/Making Primitive Objects Thread Safe/Figure 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 1: The SAFETYPE template class</A></h4>
<pre>
template&lt;class T&gt;
class SAFETYPE
{
   public:
      SAFETYPE();
      SAFETYPE(const SAFETYPE&lt;T&gt;&amp; SAFETYPEsrc);
      SAFETYPE(const T&amp; t);  

      // member methods for atomic lock/unlock
      void SingleLock()const;
      void SingleUnlock()const;

      // operators
      operator T() const; 
      const SAFETYPE&lt;T&gt;&amp; 
      operator=(const SAFETYPE&lt;T&gt;&amp; SAFETYPEsrc);
      const SAFETYPE&lt;T&gt;&amp; 
      operator+=(const SAFETYPE&lt;T&gt;&amp; SAFETYPEsrc);
      const SAFETYPE&lt;T&gt;&amp; 
      operator-=(const SAFETYPE&lt;T&gt;&amp; SAFETYPEsrc);

      /* the rest of the C operators ... */
      
   protected:
      HANDLE m_hMutex; // access protection
      T m_t;           // The data 
};
</pre></body></html>
