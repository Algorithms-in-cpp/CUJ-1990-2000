






<HTML>
     
     <HEAD>


          
          <TITLE>August 1996/Approximate Inverse Color Mapping/Listing 1</TITLE>
     </HEAD>
     
     <BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
          
          <H4>Listing 1: Interleaving color bits</H4>

<PRE>

long expand[256];

void init_interleave_table(void)
{ int i, j, expanded;
  for(i=0;i&lt;256;i++) {
    expanded = 0;
    for(j=0;j&lt;8;j++)
      expanded |= (i&amp;(1&lt;&lt;j))&lt;&lt;(2*j);
    expand[i] = expanded;
  }
}

long interleave_color(int r, int g, int b)
{
  return ((expand[r]&lt;&lt;2) 
          | (expand[g]&lt;&lt;1) 
          | (expand[b]));
}
/* End of File */
</PRE>
     </BODY>
</HTML>
