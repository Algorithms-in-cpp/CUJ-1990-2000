<HTML><HEAD>
<TITLE>May 1991/Stepping Up To C++/Listing 9</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 9</A></h4>
<pre>/*
 * xrt.c - cross-reference table
 */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

#include "ln_seq.h"
#include "xrt.h"

struct treenode
   {
   char *word;
   ln_seq lines;
   treenode *left, *right;
   treenode(unsigned);
   ~treenode();
   };

treenode::treenode(unsigned n) : lines(n) { }

treenode::~treenode()
   {
   delete word;
   delete left;
   delete right;
   }

static treenode *addtree
      (treenode *t, char *w, unsigned n)
   {
   // same as Listing 7 ...
   }

static void printtree(treenode *t)
   {
   // same as Listing 4 ...
   }

static treenode *root = 0;

void xrt_add(char *w, unsigned n)
   {
   root = addtree(root, w, n);
   }

void xrt_destroy(void)
   {
   delete root;
   }

void xrt_print(void)
   {
   printtree(root);
   }
</pre>
</BODY>
</HTML>
