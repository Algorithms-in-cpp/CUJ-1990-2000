


<HTML><HEAD>

<TITLE>May 1998/Double Dispatch with an Inverted Visitor Pattern/Listing 1</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4>
<A name="HEADING1">Listing 1: Implementation of visitor pattern</A></h4>


<pre>
class Event // our "Visitor"
{
public:
    virtual visitWidget(Widget&amp;)               
    { /* default visitation */ }
    virtual visitDerivedWidget(DerivedWidget&amp;) 
    { /* default visitation */ }
};

class DerivedEvent
{
public:
    virtual visitWidget(Widget&amp;) { /* overridden */ }
    virtual visitDerivedWidget(DerivedWidget&amp;) { /* overridden */ }
};

class Widget // our "Element"
{
public:
    virtual accept(Event&amp; e) { e.visitWidget(*this); }
};

class DerivedWidget : public Widget
{
public:
    virtual accept(Event&amp; e) { e.visitDerived(*this); }
};

/* End of File */
</pre>
</body></html>
