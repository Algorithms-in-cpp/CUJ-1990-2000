<HTML><HEAD>
<TITLE>March 1994/Weight Reduction Techniques in C++/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1 <I>Defines class</I> MemoryPool</A></h4>
<pre>#ifndef MEMPOOL_H
#define MEMPOOL_H

#include &lt;stddef.h&gt;

const CharSize = 8;
const PoolSize =
  sizeof(unsigned long)*CharSize;

class MemoryPoolLink {
private:
friend class MemoryPool;
  MemoryPoolLink(size_t _size,
    MemoryPoolLink *_next);
  ~MemoryPoolLink();
  void *malloc(size_t size);
  void free(void *, size_t size);
  unsigned long bits;
  MemoryPoolLink *next;
  char *data;
};

class MemoryPool {
  MemoryPoolLink freeHead;
  MemoryPoolLink usedHead;
  size_t size;
public:
  MemoryPool(size_t size);
  void *add();
  void *malloc();
  void free(void *);
};

#endif
</pre>
</BODY>
</HTML>
