<HTML><HEAD>
<TITLE>March 1994/Weight Reduction Techniques in C++/Figure 8</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 8<I> Using a special case for an empty list</A></I></h4>
<pre>class AttributeList {
private:
   struct AttributeListImp {
     int *list;
     unsigned count;
     AttributeListImp (int *
       data, unsigned size)
     {
       list = new int[size];
       memcpy(list,data,
         sizeof(int)*size);
       count = 1;
     }
   } *ptr;
public:
   AttributeList()
   {
// Empty list special case:
     ptr = NULL;
   }
   AttributeList(int *data,
     unsigned size)
   {
     ptr = new
       AttributeListImp(data,
         size);
   }
   AttributeList(const
     AttributeList &amp;a)
   {
// Now we have to check
// for null:
     ptr: a.ptr;
     if(ptr) ptr-&gt;count++;
  }

...

};

// End of File</pre>
</BODY>
</HTML>
