<HTML><HEAD>
<TITLE>March 1994/Stepping Up To C++/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2 <I>A crude application of the</I> shape <I>hierarchy in <a href="list1.htm">Listing 1</A></I></A></h4>
<pre>//
// 'clone_all' clones shape array 'sal' with 'n'
// elements
//
shape **clone_all(shape *sa1[], size_t n)
   {
   shape **sa2 = new shape *[n];
   for (size_t i = 0; i &lt; n; ++i)
      sa2[i] = sa1[i]-&gt;clone();
   return sa2;
   }

//
// 'largest' returns the shape with the largest
// area from shape array 'sa' with 'n' elements
//
shape *largest(shape *sa[], size_t n)
   {
   shape *s = 0;
   double m = 0;
   for (size_t i = 0; i &lt; n; ++i)
      if (sa[i]-&gt;area() &gt; m)
         {
         m = sa[i]-&gt;area();
         s = sa[i];
         }
   return s;
   }
   
int main()
   {
   const int N = 4;
   shape *s[N];
   shape *ls;
   s[0] = new circle(shape::RED, 2);
   s[1] = new triangle(shape::BLUE, 5, 6, asin(0.8));
   s[2] = new rectangle(shape::RED, 3, 4);
   s[3] = new circle(shape::GREEN, 3);
   cout &lt;&lt; "The shapes are:\n";
   for (int i = 0; i &lt; N; ++i)
      cout &lt;&lt; i &lt;&lt; ")\t" &lt;&lt; *s[i] &lt;&lt; '\n';
   cout &lt;&lt; '\n';
   shape **cs = clone_all(s, N);
   cout &lt;&lt; "The cloned shapes are:\n";
   for (i = 0; i &lt; N; ++i)
      cout &lt;&lt; i &lt;&lt; ")\t" &lt;&lt; *cs[i] &lt;&lt; '\n';
   cout &lt;&lt; '\n';
   ls = largest(cs, N);
   cout &lt;&lt; "The shape with the largest area is a...\n\t";
   cout &lt;&lt; *ls &lt;&lt; ".\n";
   cout &lt;&lt; "Its area is "&lt;&lt; ls-&gt;area() &lt;&lt; ".\n";
   return 0;
   }
   
// End of File
</pre>
</BODY>
</HTML>
