<HTML>
<HTML><HEAD>
<TITLE>May 1999/Portable Control of Multiple Daemon Processes/Listing 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 4:	A Windows daemon killer</A></h4>
<pre>
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
     
#define LOGFILE "pid.log"
     
main(int argc, char* argv[])
{
FILE *fp;
DWORD pid;
HANDLE h;
DWORD a;
     
fp = fopen(LOGFILE,"r");
while (!feof(fp))
    {
    fscanf(fp,"%u",&amp;pid);
    if (!feof(fp))
        {
        a = 1;
        h = OpenProcess(a,1,pid);
        TerminateProcess(h,1);
        }
    }
fclose(fp);
     
exit(0);
}

</pre>
</BODY>
</HTML>
