<HTML><HEAD>
<TITLE>May 2000/Thread-Safe Access to Collections/Figure 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 2: A stack-based lock template class</A></h4>
<pre>
template&lt;class _Type&gt;
class LockAuto
{
public:

LockAuto(_Type&amp; res)
        : m_res(res)
    {
        m_res.lock();
    }

    ~LockAuto()
    {
        m_res.unlock();
    }

private:

    _Type&amp;  m_res;

    // Copy and assignment are not supported
    LockAuto(const LockAuto&amp; rhs);
    LockAuto&amp; operator= (const LockAuto&amp; rhs);
};
</pre></body></html>
