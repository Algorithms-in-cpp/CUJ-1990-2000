<HTML><HEAD>
<TITLE>January 1993/Designing an Extensible API in C/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3 <B><I></B>An example of how the </I><B></B>size<B><I></B> field can save a recompile</I></A></h4>
<pre>int GetSystemInfo (SYSTEM_INFO *sinfo)
{
    sinfo-&gt;num_displays = _getNumDisplays ();
    sinfo-&gt;num_printers = _getNumPrinters();
    sinfo-&gt;num_drives =   _getNumDrives();
    if (sinfo-&gt;size == sizeof (oSYSTEM_INFO))
    {
         /* don't touch extended fields */
    }
    if (sinfo-&gt;size == sizeof (SYSTEM_INFO))
    {
         /* fill extended fields */
         sinfo-&gt;num_tapes =   _getNumTapes();
    }
    return 0;
}

/* End of File */
</pre>
</BODY>
</HTML>
