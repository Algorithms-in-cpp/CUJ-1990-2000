<HTML><HEAD>
<TITLE>January 1993/Code Capsules/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2 <B></B>time2.c &#151; <B><I></B>shows how to compute a date a given number of days in the future, as well as the elapsed execution time in seconds</I></A></h4>
<pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;

main()
{
   time_t start, stop;
   struct tm *now;
   int ndays;

   /* Get current date and time */
   time(&amp;start);
   now = localtime(&amp;start);

   /* Enter an interval in days */
   fputs("How many days from now? ",stderr);
   if (scanf("%d",&amp;ndays) !=1)
      return EXIT_FAILURE;
   now-&gt;tm_mday += ndays;
   if (mktime(now) != -1)
      printf("New date: %s",asctime(now));
   else
      puts("Sorry. Can't encode your date.");

   /* Calculate elapsed time */
   time(&amp;stop);
   printf("Elapsed program time in seconds: %f\n",
     difftime(stop,start));

   return EXIT_SUCCESS;
}

/* Output
How many days from now? 45
New date: Fri Nov 20 12:40:32 1992
Elapsed program time in seconds: 1.000000
*/

/* End of File */
</pre>
</BODY>
</HTML>
