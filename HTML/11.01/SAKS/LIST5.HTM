<HTML><HEAD>
<TITLE>January 1993/Stepping Up To C++/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 <B><I></B>An implementation of</I><B></B> float_array <B><I></B>that extends the size of the array when it detects subscript out-of-bounds</I></A></h4>
<pre>// float_array::operator[] that extends the array on
// subscript out of bounds
float &amp;float_array::operator[](size_t i)
   {
   if (i &gt;= len)
      {
      float *new_array = new float[i + 1];
      assert(new_array != 0);
      size_t j;
      for (j = 0; j &lt; len; ++j)
         new_array [j] = array[j];
      for (; j &lt; i + 1; ++j)
         new_array[i] = 0;
      delete [] array;
      array = new_array;
      len = i + 1;
      }
   return array[i];
   }
/* End of File */
</pre>
</BODY>
</HTML>
