<HTML><HEAD>
<TITLE>July 1994/Standard C/C+/Listing 7</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 7 <I>The function</I> get(streambuf&amp;, char)</A></h4>
<pre>// isgstream -- istream::get(streambuf&amp;, char)
#include &lt;istream&gt;

istream&amp; istream::get(streambuf&amp;sb, char delim)
    { // get into streambuf until delimiter
    _Chcount = 0;
    _TRY_IO_BEGIN
    if (ipfx(1))
       {   // copy characters until failure
       int ch;
       for (; (ch = rdbuf()-&gt;sbumpc()) != EOF; ++_Chcount)
          _TRY_BEGIN
             if (ch == delim || sb.sputc(ch) == EOF)
                break;
          _CATCH_ALL
             break;
          _CATCH_END
       if (ch) != EOF)
          rdbuf()-&gt;sputbackc(ch);
       }
    if (_Chcount == 0)
       setstate(failbit);
    isfx();
    _CATCH_IO_END
    return (*this);
    }

// End of File
</pre>
</BODY>
</HTML>
