<HTML><HEAD>
<TITLE>July 1994/Code Capsules/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2 <I>Illustrates stack unwinding</I></A></h4>
<pre>// destroy2.cpp
#include &lt;iostream.h&gt;

class Foo
{
public:
   Foo() {cout &lt;&lt; "Foo constructor"
             &lt;&lt; endl;}
   ~Foo() {cout &lt;&lt; "Foo destructor"
              &lt;&lt; endl;}
};

void f();
void g();

main()
{
   try         // Turn on exception
             // handling
   {
      f();
   }

   catch(...)  // Ellipsis matches any
             // exception
   {
      cout &lt;&lt; "Caught exception"
          &lt;&lt; end1;
   }
   return 0;
}

void f()
{
   Foo x;

   g();
}

void g()
{
   Foo x;

   throw 1;
}

/* Output:
Foo constructor
Foo constructor
Foo destructor
Foo destructor
Caught exception
*/

// End of File
</pre>
</BODY>
</HTML>
