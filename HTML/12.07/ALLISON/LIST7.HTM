<HTML><HEAD>
<TITLE>July 1994/Code Capsules/Listing 7</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 7<B></B> <B><I></B>Illustrates a dangling resource<A name="0145_00BE"></I></h4><P>
<pre>// destroy3.cpp
#include &lt;stdio.h&gt;

void f(char *fname);

main()
{
   try
   {
      f("file1.dat");
   }
   catch(...)
   {}
   return 0;
}

void f(char *fname)
{
   FILE *fp = fopen(fname,"r");
   if (fp)
   {
      // Use f, then throw an
      // exception
      throw 1;
      fclose(fp);     // This won't
                   // happen
   }
}

// End of File
</pre>
</BODY>
</HTML>
