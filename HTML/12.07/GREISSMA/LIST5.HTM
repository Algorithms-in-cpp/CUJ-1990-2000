<HTML><HEAD>
<TITLE>July 1994/Structure Mapping Techniques in C++/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 Mapped object <I>stream operators</I></A></h4>
<pre>ostream &amp;operator &lt;&lt; ( ostream &amp;o, MappedObject &amp;object )
{
   char buf[ 256 ];
   Map &amp;map = object.map;
   
   o &lt;&lt; map.getName() &lt;&lt; " ";
   
   for (int i = 0; i &lt; map.getCount(); ++i)
      o &lt;&lt; map[ i ].toString( buf, &amp;object ) &lt;&lt;" ";

   return o;
}

istream &amp;operator &gt;&gt; ( istream &amp;i, MappedObject &amp;object )
}
   char buf[ 256 ];
   Map &amp;map = object.map;

   i &gt;&gt; buf;

   if (strcmp( buf, map.getName() )) {
      printf( "Cannot convert &lt;%s&gt; to &lt;%s&gt; in operator &gt;&gt;\n",
              buf, map.getName() );
      exit( <I>-</I>1 );
   }

   for (int k = 0; k &lt; map.getCount(); ++k)
      i &gt;&gt; buf, map[ k ].fromString( &amp;object, buf );

   return i;
}

/* End of File */</pre>
</BODY>
</HTML>
