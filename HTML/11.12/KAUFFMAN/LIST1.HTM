<HTML><HEAD>
<TITLE>December 1993/A Windows Debugging Stream/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1 <I>Definition of classes</I> MyDebugStreambuf <I>and</I> MyDebugStream</A></h4>
<pre>class MyDebugStreambuf : public strstreambuf
{
public:
    MyDebugStreambuf( BOOL UseMessageBox, char* pTitle );
    ~MyDebugStreambuf()
    {
        delete [];
    }
    virtual int overflow( int ch );
    virtual int sync();
protected:
    void Flush();

    BOOL  m_UseMessageBox;
    char* m_pTitle;
    unsigned m_BufferSize;
    char* m_pBuffer;
};

class MyDebugStream : public ostream
{
public:
    MyDebugStream( BOOL UseMessageBox = FALSE, char* pTitle = NULL );
protected:
    MyDebugStreambuf m_buf;
};

#define FLUSH_TO_BOX 0x01
#define FLUSH_TO_DEBUG 0x02

ostream&amp; BoxFlush( ostream&amp; os );

ostream&amp; DebugFlush( ostream&amp; os );
// End of File
</pre>
</BODY>
</HTML>
