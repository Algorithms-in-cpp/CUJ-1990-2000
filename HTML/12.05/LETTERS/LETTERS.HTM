

<HTML>
<HEAD>

<TITLE>May 1994/We Have Mail</TITLE></HEAD>
<body bgcolor="#ffffff">
<H2><A HREF="../tocmay.htm"><IMG SRC="../../toc.gif" ALT="{back to toc}" WIDTH="54" HEIGHT="54"></A><FONT COLOR="#FF0000">   Departments</FONT></H2>

<hr><h2 align="center"><font color="#800000">We Have Mail<A name="010A_0082"><A name="010A_0082"></font></h2><hr>
<BLOCKQUOTE>
<A name="010A_0000"><A name="010A_0000">Dear Mr. Plauger,<P>
Thank you for your many roles in contributing to <I>The C Users Journal</I>, and consequently to all of us who learn from it. I would like to offer a suggestion: make the <I>CUJ</I>-related e-mail addresses more evident.<P>
It was not until the most recent (Dec. '93) issue that I had a desire to send something back (question, letter to editor, etc.). Had I not been able to get my hands on the Nov. '93 issue, I would have been at a loss as to where to send my e-mail. Fortunately your Nov. '93 <I>Editor's Forum</I> listed the three pertinent e-mail addresses and, as importantly, what things are appropriate to send to each. I could not find this information in the Dec. '93 issue, and nervously extrapolated that future issues might not bear this information either &#151; thus my suggestion.<P>
I'd also like to take this opportunity to appreciate your participation in the Apr./May C/C++ Conference in New Jersey this year. I recall your pragmatic, realistic perspective during your keynote address on the last day. It helped me leave the conference fairly grounded, since as a C++ newbie I felt quite afloat in the newness and the perceived Awesome Power of this brave new world (C++/OOP). I also have now heard from too many people about the book <I>Peopleware</I> (but from you first then), and I plan to soon devour it as well.<P>
Qapla'<P>
Mike Cepek<br>
Senior Software Design Engineer<br>
Internet: <I>cepek@mgi.com</I><br>
Management Graphics, Inc.<br>
1401 E. 79th St.<br>
Minneapolis, MN 55425 USA<br>
Front desk: +1 612/854-1220<br>
My desk/Voice mail: 851-6112 Fax: -6159<P>
<I>We're trying to institutionalize how we present e-mail addresses, particularly with the sudden upsurge in activity on the internet. Thanks for bearing with us. And thanks for the kind words </I>&#151;<I> I appreciate the feedback.</I>&#151;<I> pjp</I><P>
pjp<P>
In December's issue, a reader Mr. Hardy asked about pcx importing in C. First, he should probably get one of the good inexpensive compilers like Turbo, Quick C, etc. But then, I have found that Genus Microprogramming's pcx toolkit is an exceptional value and the tech people are friendly and helpful. In addition, Mr. Hardy could download a handy pcx drawing program (shareware license is only $45). All in all, this would be a good budget way to get into what he wants to do.<P>
Genus Microprogramming's number is 1 800 227 0918. Hope this helps him. :&gt;<P>
<I>uunet!sosc1.sosc.osshe.edu!ferrell</I><P>
Dear Sir,<P>
This is with regard to the request for information on the PCX format in the Mail column of the December issue of <I>The C Users Journal</I>. I ran into a similar problem a few years ago when I started work on a conversion program to convert less supported formats like Tandy color Computer's Colormax and CoComax formats and PrintShop Master files to more popular formats like GIF &amp; PCX. I've looked all over for information on graphics formats. The only books I've found on the market are Steve Rimmer's <I>Bit-Mapped Graphics, Superhcarged Bitmapped Graphics</I>, and the book <I>Graphics File Formats</I> (I'm not sure of the author). The <I>Supercharged Bitmapped Graphics</I> book has information on the PCX 24-bit format only because the other PCX formats are covered in Rimmer's other book, Bit-Mapped Graphics. I believe the books are still in print. I see them in the bookstores every so often.<P>
While we're on the subject of formats, I could use some help with sound formats like WAV or MIDI. I've been reading a lot of books on sound for multlimedia and have books explaining how to access the data in these formats. I also have a sound command available using my Watocm C++ compiler. I'm jsut not sure how to go from the data to playing it on the PC speaker. I know there are programs around that can play sound files without using Windows calls or accesing a Soundlblaser driver. If any of the readers have any suggestions on how this could be done, I would greatly appreciate it.<P>
I also wanted to let the personnel at <I>The C Users Journal</I> know how much I enjoy their magazine. Encloosed is a check for $29.95 for a one year subscription to the magazine.<P>
Thanks.<P>
Sincerely,<P>
Laura Michaels<br>
5910 Morningstar Cir, #303<br>
Delray Beach, FL 33484<P>
Dear Mr. Plauger:<P>
In the Dec. '93 issue, reader Lawrence Hardy asked for information on displaying PCX graphics from within a C program. I dug up these references which may help him, and list the sources I know of:<P>
1)     PCX Toolkit &#151; from Genus Software (800) 227-0918 ($229) also available at Programmer's Shop (800) 421-8006<P>
2)     PCX16 (shareware) &#151; a library of Foxpro routines to display a 16-color PCX file (2-color and 256-color routines exist also) This is on the Technotools CDROM from Chestnut Software<P>
3)     RSHPCX (shareware) &#151; library of Clipper routines (on SIMTEL)<P>
4)     CLIPFPCX (shareware) &#151; more Clipper library (SIMTEL)<P>
5)     PCX_C (shareware) &#151; C source to display a PCX file (SIMTEL)<P>
6)     TPPCX (shareware) &#151; Turbo Pascal source to display a PCX file SIMTEL and the "Source Code" CDROM from Walnut Creek)<P>
No doubt these files and many others can be obtained from any good BBS, but I find it easier to search my own listings than to play long-distance "phone tag" with BBSs. One good place to start might be the Programmer's Corner BBS: (301) 596-7692.<P>
As for anonymous ftp-ing from the net, I would note that although the SIMTEL server at White Sands Missle Range (wsmrsimtel20.army.mil) has shutdown as of Sept. 30, its files should be available thru its "sister" mirror server at wuarchive.wustl.edu. Also. I've seen latest SIMTEL archives on CDROM at local swaps for $20 or so. Not a bad deal for 9,000 files on all subjects.<P>
While I am at it, I'd like to enter my own plea for help/advice in managing the increasing amount of information I need and have. Just to research this letter I referenced several catalogs, six file listings, and my terminal program's phone list. When I see the people in Star Trek get any info they want out of their computer, instantly, I get very jealous. Perhaps one of your readers has a cheap (pd?) solution that works?<P>
If readers (or <I>CUJ</I>) would like a copy of any of the shareware files, they can send me a mailer, disk, and return postage. Alternatively, if the magazine would like a copy for its own library, just let me know by e-mail and I will gladly ship you a disk. Perhaps <I>CUJ</I> would be willing to swap for one of it's CUG library disks?<P>
I have sent a copy of this letter direct to Mr. Hardy.<P>
Regards,<P>
Scott Daniels<br>
9 Joval Street<br>
East Lyme, CT 06333<br>
Compuserve 73201,670<P>
PS I am finding now that each new issue of <I>CUJ</I> is becoming more and more pertinent to my work in C. <I>CUJ</I> is quickly becoming my best current reference. But please don't forget us up-and-coming C-newbies. Keep up the good work!<P>
<I>These three letters neatly illustrate one of the answers to the information overload </I>&#151;<I> friends helping friends locate pertinent data. Until we get those dedicated agents (gremlins) to scour databases on our behalf, we'll just have to know whom to ask, or when to shout for help. It ain't particularly efficient, but it is very human. </I>&#151;<I> pjp</I><P>
Dear Mr. Plauger,<P>
Just a word from Paris to signal a mistake in Mr. Chuck Allison's article: "Bit handling in C."<P>
He writes:<P>
01010101<P>
<pre>^ 11110000
----------
= 10100000 (== 0Xa0)
</pre>
but it's:<P>
<pre></pre>
01010101<P>
<pre>^ 11110000
----------
= 10100101 (== 0xa5)</pre>
I hope a good new year for all staff of the C Users Journal.<P>
Claude Lessertisseur<br>
Roland Moreno Technology<br>
Groupe Innovatron<br>
137, Bd de Sebastopol<br>
75002 Paris, France<br>
<I>CL94@calvacom.fr</I><P>
<I>Merci. </I>&#151;<I> pjp</I><P>
Hi Dr. Plauger,<P>
This is a short note to inform you about a mis-type in one of your articles in you November '93 issue, "Bit Handling in C" by Chuck Allison. On page 89, the Exclusive-OR operation on 01010101 and 11110000 should be 10100101, instead of 10100000. Although this is kind of late, it seems as though nobody has caught on to it yet in your December Issue.<P>
Anyway, your magazine is still one of the best magazines for us C and C++ users. Keep up the great work!<P>
J. Gerald Sta. Ana<br>
NEC Technologies, Philippines<br>
<I>gerald@ntep.tmg.nec.co.jp</I><P>
<I>One of my jobs is to catch gaffes like that. It got by me. By pointing it out, you both may have resolved a nagging worry on the part of a newer C programmer. </I>&#151;<I> pjp</I><P>
In response to R.W.J. Ford's letter in the January 1994 issue of <I>The C Users Journal</I>:<P>
The reason for the <I>SH_COMPAT</I> flag goes back to the days when DOS didn't have SHARE and didn't understand about networks and file sharing. Two programs could perfectly well open the same file, and it was up to them to deal with coordinating access between themselves.<P>
When SHARE was introduced, a problem cropped up. If a program used SHARE, it wouldn't be able to cooperate with a program that didn't, so permitting all access by default wouldn't be possible. Similarly, programs that did not use SHARE assumed that all access would be possible, so denying any access by default wouldn't be possible either since in that case programs that worked before would simply cease working if SHARE was installed.<P>
So <I>SH_COMPAT</I>, or compatibility mode, was created. If a program opened a file in this mode, SHARE assumes that the program predates SHARE and will only allow similar programs to access the file. Programs that try to open the file in any other sharing mode are denied access. If the file is open in any other sharing mode, any attempt to open it in compatibility mode is denied since the program using compatibility mode won't be able to use SHARE's services to coordinate access.<P>
Summary: files can be opened by programs that pre-date SHARE, or by programs that understand SHARE, but not by both at once. <I>SH_COMPAT</I> tells DOS that the program trying to open the file pre-dates SHARE, while any other sharing mode indicates that the program understands SHARE.<P>
Todd Knarr<br>
<I>tknarr@netcom.com</I><P>
Dear CUJ,<P>
In the January 1994 "We Have Mail" column, R. W. J. Ford asks about SHARE. It is SHARE's job to maintain the consistency of the file system on a network server. On every open, close, read, write, lock, or unlock operation referencing a local disk, DOS calls SHARE, which maintains a list of all open files on the local disks, complete with the full path specification, open mode(s), users, and locked regions. SHARE exists (almost) solely to generate DOS errors 20h ("Sharing violation") and 21h ("Lock violation").<P>
A sharing violation occurs when a program attempts to open an already open file in a conflicting mode; attempting to open a file with read/write access in <I>SH_DENYNO</I> (deny none) mode, for instance, when another machine has already opened the file with read/write access in <I>SH_DENYWR</I> (deny write) mode, will yield a sharing violation. A lock violation occurs when a program attempts to read or write a region of a file locked (via INT 21h, function 5Ch) by another program. SHARE also contains code that can be used by servers to close all of the files held open by a particular machine &#151; a very important thing to do when a workstation crashes or is rebooted without terminating its network connections in an orderly manner!<P>
<I>SH_COMPATF255D</I> (compatibility mode) is a "trick" mode used to fool non-network-aware programs into thinking they are running on a standalone machine. You would assume that if you're not interested in sharing an open file you would simply open it in <I>SH_DENYRW</I> (exclusive use) mode; the problem is that <I>SH_DENYRW</I> mode will prevent <I>any</I> other opens of the file, including other opens by the same program.<P>
Multiple simultaneous opens of the same file by the same program may sound rather peculiar, but enough applications do it to make <I>SH_COMPAT</I> necessary. <I>SH_COMPAT</I>, which is simply the "old, pre-networking" open mode, is like <I>SH_DENYWR</I> except that it allows multiple opens in the same machine. For full sharing, i.e. to allow multiple users both read and write access to a file, you must use <I>SH_DENYNO</I>.<P>
While on the subject of open modes, it is interesting to note that while you would expect DOS to open COM, EXE, and BAT files with read access in <I>SH_DENYWR</I> mode (so that multiple machines could execute them but no machine could modify them), it actually uses <I>SH_COMPAT</I>. It is possible for the network redirector to detect that a file is being opened by the EXEC system call (INT 21h, function 4Bh) and convert the open mode to something more reasonable, but applications that reopen their own EXE file must be careful not to use <I>SH_COMPAT</I>.<P>
Note that SHARE need be loaded only in servers. Operations on network files are diverted before SHARE ever sees them, so SHARE has no knowledge whatsoever of files that don't live on the local disks. There are, however, a few exceptions to the "SHARE only in servers" rule; namely a few applications (written by programers who didn't really understand SHARE themselves) which won't run properly on a network (use the correct open modes and locking) unless SHARE is loaded on the workstation &#151; they use the presence of SHARE as their indication that they are running on a network. Such application should be considered broken, and they should be fixed &#151; but they do exist.<P>
Those who are really into the technicalities of DOS may wonder where this stuff about "users" and "machines" comes from, since there are no parameters on a DOS open that carry any such information. But there is another way to call DOS, via the Server Entry Point (INT 21h, function 5D00h). Calls to the Server Entry Point are made with a register pair pointing at a structure that contains all the information that would normally be passed in the registers plus some additional information about the particular network user. DOS stores the extra information internally, then loads the registers from the structure and proceeds as if called via the normal INT 21h function. Note that this is why a number of "special disks," like some CD-ROM jukeboxes, don't work on networks &#151; their drivers don't support the Server Entry Point.<P>
As for ensuring that data is immediately written to disk, the COMMIT system call (INT 21h, function 68h) is <I>supposed</I> to do just that. Be aware, however, that some networks simply ignore COMMIT!<P>
John A. Murphy<br>
Senior Software Sorcerer<br>
Performance Technology<br>
800 Lincoln Center<br>
7800 I. H. 10 West<br>
San Antonio, TX 78230<P>
<I>Both of these letters offer tidy summaries. Thanks. </I>&#151;<I> pjp</I><P>
P.J. Plauger,<P>
I saw a question in the mail section of the January issue, and had to respond. It was a question from Delbert Bourling concerning the Maximum Entropy method of Spectral Analysis, and FFT Analysis. For the FFT part I would direct you to a book by Louis Baker called <I>C Tools for Scientists and Engineers</I>. There are others.<P>
For the Maximum Entropy I have to give paper references:<P>
"Maximum entropy spectral analysis of multiple sinusoids in noise," E.H. Satorious and J.R. Zeidler, Oct. 1978, vol. 43, pp. 111-118, <I>Geophysics</I>.<P>
"A New Algorithm for Two-Dimensional Maximum Entropy Power Spectrum Estimation," JAE S. Lim and Naveed A. Malik, <I>IEEE Trans. Acoust., Speech, Signal Processing</I>, vol. ASSP29, pp. 401-413, June '81.<P>
Please keep up the good work and I hope this is of use to Mr. Bourling.<P>
Sincerely,<P>
Andy LaCombe<br>
<I>andy.lacombe@sdrc.com</I><P>
<I>Thanks. </I>&#151;<I> pjp</I><P>
Dear CUJ,<P>
This is in regard to Mr. Lopez letter of January, 1994.<P>
I purchased a copy of PC/VI in 1987 when it appeared. Unfortunately, Custom Software Systems was sued by AT&amp;T for using AT&amp;T's source code in their products without paying royalties. That is why it seems so much like VI, because it is!<P>
MKS Systems offers a reasonable VI nowadays, and there are all the public-domain versions like stevie and elvis to consider as well. Mr. Lopez could search the <I>CUJ</I> Library for some other versions as well, or maybe he could convince AT&amp;T to sell the VI source on the PC?<P>
Cheers,<P>
Richard Vireday<br>
<I>rvireday@pldote.intel.com</I><P>
Dear P.J. Plauger,<P>
I just read the Editor's forum in the December 1993 issue of <I>CUJ</I>. Thanks a lot for it. It makes me realize that all programmers are in the same boat. (Tight schedules, working with more things that we should at the same time.)<P>
I am a new subscriber to <I>CUJ</I> but I've been reading the magazine for a while now. I enjoy the articles a lot and look forward to reading the articles about the latest hapennings for C and C++ and what the ISO C standards committee has to say.<P>
C++ is a great language and there is still a great need to train us (most of the C programmers, and our managers) in the benefits of adopting the language for everyday development. <I>CUJ</I> makes has been a tool in making the transition bearable.<P>
This message only adds to your load of mail and I apologize beforehand for any inconvenience the following request may cause. Could you please tell me how to get the source code for the samples published in the magazine? I got as far as ftp.uu.net but don't know how to download a file (mget?) when the file name is not in a DOS format. Thanks for any help you can give.<P>
Respectfully,<P>
<I>Pedro@wicat.com</I><br>
Jostens Learning Corp.<br>
1875 So. State St.<br>
Orem, UT<P>
<I>My added workload is small for requests such as yours </I>&#151;<I> I forward them to R&amp;D to be answered by people more competent than I on the topic. I hope the staff at R&amp;D have by now answered your download questions. </I>&#151;<I> pjp</I><P>
</BLOCKQUOTE>
</BODY>
</HTML>
