<HTML><HEAD>
<TITLE>May 1994/Code Capsules/Listing 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 4 <I>A "copy-on-write"</I> string<I> class design</I></A></h4>
<pre>// str.h: String class with reference counting

#include &lt;string.h&gt;

class String
{
public:
   // Constructors / Destructor
   String(const char *s);
   String(const String&amp; s);
   ~String();
   // other members omitted...

private:
   class Srep
   {
   public:
      Srep(const char*);
      ~Srep();
      char *rep;
      size_t count;
   };
   
   Srep *rep;
};

// End of File
</pre>
</BODY>
</HTML>
