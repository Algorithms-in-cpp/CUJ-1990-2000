<HTML><HEAD>
<TITLE>May 1994/Standard C/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 <I>The function</I> ios;:copyfmt(ios&amp;)</A></h4>
<pre>// ioscopyfmt -- ios::copyfmt(const ios&amp;)
#include &lt;ios&gt;

ios&amp; ios::copyfmt(const ios&amp; rhs)
   {    // copy format info from another ios
   if (this != &amp;rhs)
      {    // copy all but _Sb and _State
      _Tidy();
      _Tiestr = rhs._Tiestr;
      _Fmtfl = rhs._Fmtfl;
      _Prec = rhs._Prec;
      _Wide = rhs._Wide;
      _Fillch = rhs._Fillch;
      _Iosarray *p = rhs. Arr;
      for (_Arr = 0; p != 0; p = p-_Next)
         if (p-&gt;_Lo != 0 || p-&gt;_Vp != 0)
            {    // copy over nonzero array values
            iword(p-&gt;_Index) = p-&gt;_Lo;
            pword(p-&gt;_Index) = p-&gt;_Vp;
            }
      exceptions(rhs._Except);   // cause any throw at end
      }
   return (*this);
   }
// End of File
</pre>
</BODY>
</HTML>
