<HTML><HEAD>
<TITLE>November 1994/Encapsulating the DOS IOCTL Interface/Listing 8</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 8 fhandle.cpp &#151; <I>Adds file-specific capability to IoctlHandle</I></A></h4>
<pre>#include "fhandle.h"

fileHandle *fileHandle::Init(const char *path )
{
    fileHandle *obj = new fileHandle( path);

    if( obj-&gt;_handle == -1 || obj-&gt;isDevice() ) {
           delete obj;
           return (fileHandle *) 0;
    }

    return obj;

}

fileHandle *fileHandle::Init(int handle )
{
    fileHandle *obj = new fileHandle( handle);

    if( obj-&gt;_handle == --1 || obj-&gt;isDevice() ) {
           delete obj;
           return (fileHandle *) 0;
    }

    return obj;
}

// End of File
</pre>
</BODY>
</HTML>
