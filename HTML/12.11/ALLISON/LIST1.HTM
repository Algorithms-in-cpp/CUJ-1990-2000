<HTML><HEAD>
<TITLE>November 1994/Code Capsules/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1<I> A simple string class</A></I></h4>
<pre>// str.h

#include &lt;stddef.h&gt;

class ostream;
class istream;

class string {
public:
    string();
    string(const char*);
    ~string();

    friend string operator+(const string&amp;, const string&amp;);
    string&amp; operator+=(const string&amp;);
    friend int operator==(const string&amp;, const string&amp;);
    friend int operator!=(const string&amp;, const string&amp;);
    friend ostream&amp; operator&lt;&lt;(ostream&amp;, const string&amp;);
    friend istream&amp; operator&gt;&gt;(istream&amp;, string&amp;);
    char&amp; operator[](size_t);
    size_t length() const;

private:
    char* data;
    size_t count;
    void clone(const char *);
};

inline string::string()
{
    *(data = new char[1])= '\0';
    count= 0;
}

inline string::string(const char *s)
{
    clone(s);
}

inline string::~string()
{
    delete [] data;
}

inline int operator!=(const string&amp; s1, const string&amp; s2)
{
    return !(s1 == s2);
}

inline char&amp; string::operator[](size_t pos)
{
    return data[pos];
}

inline size_t string::length() const
{
    return count;
}
/* End of File */
</pre>
</BODY>
</HTML>
