<HTML><HEAD>
<TITLE>November 1994/Code Capsules/Listing 18</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 18<I> Restores traditional "return-null" behavior</A></I></h4>
<pre>// exhaust2.cpp
#include &lt;iostream.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;new.h&gt;
#include &lt;assert.h&gt;

main()
{
   set_new_handler(0);

   for (int i = 0; ; ++i)
   {
      double *dp = new double[100];
      if ((i+1)%10 == 0)
         cout &lt;&lt; (i+1) &lt;&lt;" allocations" &lt;&lt; endl;
      assert(dp);
   }
}

/* Output:
10 allocations
20 allocations
30 allocations
40 allocations
50 allocations
60 allocations
70 allocations
Assertion failed: dp, file exhaust3.cpp, line 15
Abnormal program termination
*/

// End of File
</pre>
</BODY>
</HTML>
