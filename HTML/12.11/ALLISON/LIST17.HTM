<HTML><HEAD>
<TITLE>November 1994/Code Capsules/Listing 17</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 17 <I>Illustrates</I> set_new_handler</A></h4>
<pre>// exhaust1.cpp
#include &lt;iostream.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;new.h&gt;

inline void my_handler()
{
   cout &lt;&lt; "Memory exhausted" &lt;&lt; endl;
   abort();
}

main()
{
   set_new_handler(my_handler);

   for (int i = 0; ; ++i)
   {
      (void) new double[100];
      if ((i+1)%10 == 0)
         cout &lt;&lt; (i+1) &lt;&lt; " allocations" &lt;&lt; endl;
   }
}

/* Output:
10 allocations
20 allocations
30 allocations
40 allocations
50 allocations
60 allocations
70 allocations
Memory exhausted
Abnormal program termination
*/

// End of File
</pre>
</BODY>
</HTML>
