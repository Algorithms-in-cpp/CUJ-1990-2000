<HTML><HEAD><TITLE>August 1990/Writing Your Own Quicksort/Listing 3</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="01BF_010E"><A name="01BF_010E">Listing 3 Demonstrating Worst-Case qsort() Performance<A name="01BF_010E"></h4><P>
<pre>#include &lt;stdio.h&gt;
#include &lt;time.h&gt;
#include &lt;stdlib.h&gt;

#define ARRAY_SIZE 1000

int test_array[ARRAY_SIZE];

int compare( int <SUP>*</SUP>a, int *b )
{
   return( *a - *b );
}

main()
{
   int i;
   time_t start_time;
   time_t stop_time;
   
   for ( i=0; i&lt;ARRAY_SIZE ; i++ )
      test_array[i] = rand();
   time( &amp;start_time );
   qsort( test_array, ARRAY_SIZE, sizeof(int), compare );
   time( &amp;stop_time );
   printf( "%f seconds elapsed.\n", difftime( stop_time, start_time));
   test_array[0] += 100;
   time( &amp;start_time );
   qsort( test_array, ARRAY_SIZE, sizeof(int), compare );
   time( &amp;stop_time );
   printf( "%f seconds elapsed.\n", difftime( stop_time, start_time));
   for (i=0 ; i&lt;ARRAY_SIZE-1 ; i++ )
      if ( test_array[i] &gt; test_array[i+1] )
          printf( "Mismatch at position %d\n", i );
}
</pre>
</BODY></HTML>
