<HTML><HEAD><TITLE>August 1990/C Extensions For Multi-Threading/Listing 4</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="01B7_010C"><A name="01B7_010C">Listing 4<A name="01B7_010C"></h4><P>
<pre>prolog lock(HSEM sem, long timeout)
  {
  int error;
  error = DosSemRequest(sem,timeout);
  if(error) return(error);
  }

epilog unlock(HSEM sem)
  {
  DosSemClear(sem);
  }

update(char *buffer, HSEM sem)
  prolog lock(sem,10000);
  epilog unlock(sem);
  {
  /***  UPDATE A SHARED BUFFER ***/
  }</pre>

</BODY></HTML>
