<HTML><HEAD><TITLE>August 1990/C Extensions For Multi-Threading/Listing 3</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="01B7_010A"><A name="01B7_010A">Listing 3<A name="01B7_010A"></h4><P>
<pre>func(int type)
{
/* Begin critical section     */
lock();
switch(type)
  {
  case 1:
  /***  Do work for type code 1 ***/
  /***  End critical section    ***/
  unlock();
  return(SUCCESS);
  case2:
  /***  Do work for type code 2 ***/
  /***  End critical section    ***/
  unlock();
  return(SUCCESS);
  default:
  if(type &gt; 5)
    {
    /***  End critical section ***/
    unlock();
    return(ERROR);
    }
  /***  Do default work         ***/
  /***  End critical section    ***/
  unlock();
  return(SUCCESS);
  }
}
</pre>
</BODY></HTML>
