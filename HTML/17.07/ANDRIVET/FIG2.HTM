<HTML><HEAD>
<TITLE>July 1999/A Simple XML Parser/Figure 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 2: Sample use of simple XML parser</A></h4>
<pre>
// Get the name of the first town

#include "..\..\XmlReader.h"
using namespace SimpleXMLParser;

char* OpenXmlFile(char* szFileName, long&amp; nSize)
{
    ...
}

void main()
{
    // Get the content of the XML file
    long nSize = 0;
    char* pBuffer = OpenXmlFile("sample.xml", nSize);
    if(pBuffer == 0)
        return(false);

    try
    {
        // Parse the XML document
        Parser parser;
        const Element&amp; root = parser.Parse(pBuffer, nSize);
      
        // Get the name of the first (index 0) town
        string strName = root("town", 0)("name").GetValue();
        cout &lt;&lt; "Name of the first town: " 
             &lt;&lt; strName &lt;&lt; endl;
    }
    catch(Exception e)
    {
        cout &lt;&lt; "Parsing error at line " 
             &lt;&lt; e.GetLine() &lt;&lt; endl;
    }

    // Delete the buffer
    delete[] pBuffer;
    return(1);
}

</pre>
</BODY>
</HTML>
