<HTML><HEAD>
<TITLE>January 1992/Standard C/Listing 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 4 (freopen.c)</A></h4>
<pre>/* freopen function */
#include &lt;stdlib.h&gt;
#include "xstdio.h"

FILE *(freopen)(const char *name, const char *mods, FILE *str)
       {       /* reopen a file */
       unsigned short mode = str-&gt;_Mode &amp; _MALFIL;

       str-&gt;_Mode &amp;=~_MALFIL;
       fclose(str);
       str-&gt; _Mode = mode;
       return (_Foprep(name, mods, str));
       }
/* End of File */
</BODY>
</HTML>
