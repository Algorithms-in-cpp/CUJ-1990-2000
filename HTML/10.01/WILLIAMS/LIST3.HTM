<HTML><HEAD>
<TITLE>January 1992/A Console Stream Class For Borland C++/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3 (vstream.cpp) Video Stream Package</A></h4>
<pre>#include &lt;iostream.h&gt;
#include &lt;conio.h&gt;


class Conbuf : public streambuf
      {
      int do_sputn(const char *s,int n);
      int overflow(int=EOF);
      } conbuf;

int Conbuf::overflow(int c)
      {
      do_sputn((char *)&amp;c,1);
      return 1;
      }

int Conbuf::do_sputn(const char *s,int n)
      {
      int n1=n;
      while (n1--)
             {
             putch(*s);
             if (*s++=='\n')
                     {
                     putch('\r');
                     clreol();
                     }
             }
      return n;
      }

ostream conout=&amp;conbuf;

// End of File
</pre>
</BODY>
</HTML>
