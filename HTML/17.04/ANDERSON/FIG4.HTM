<HTML><HEAD>
<TITLE>April 1999/CORBA Load Balancing with VisiBroker/Figure 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 4: Simplified main using the AWSServer</A></h4>
<pre>
int main(int argc, char**argv)
{
    AWSLoadBalancing*    lb =
        new AWSLoadBalancing("/MyFolder/MyObject");
    AWSServer*         server =
        AWSServer::instance(argc, argv, "TestServer", lb);

    server-&gt;addObject( new businessObjectImpl("Business Object 1") );
    server-&gt;addObject( new businessObjectImpl("Business Object 2") );
    server-&gt;addObject( new businessObjectImpl("Business Object 3") );

    try {
        server-&gt;run( );
    }
    catch(const AWSServerException &amp;srvEx) {
        cerr &lt;&lt; "Exception occurred during run: " &lt;&lt; endl;
        cerr &lt;&lt; srvEx &lt;&lt; endl;
    }
}

</pre>
</BODY>
</HTML>
