<HTML><HEAD>
<TITLE>October 1993/Exception Handling in C/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1 <I>Cleaning up after a </I>TRY</A></h4>
<pre>char *volatile p[10];
volatile int i=0;
int out_of_memory;

TRY(
{
  while (i&lt;10)
  {
    p[i] = malloc(1024);
    if (p[i] == NULL)
      THROW(out_of_memory);
    i++;
 }
},
{
  while (i--&gt; 0) free(p[i]);
}
  );
/* End of File */
</pre>
</BODY>
</HTML>
