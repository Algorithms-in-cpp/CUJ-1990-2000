<HTML><HEAD>
<TITLE>October 1993/Exception Handling in C/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2 <I>Statically nested </I>TRY<I> blocks</I></A></h4>
<pre>TRY(
{
  char *buf = malloc(256);
  
  if (buf == NULL)
    THROW(out_of_memory);
  
  TRY(
  {
    if (scanf("%255s", buf) != 1)
      THROW(failed_to_read_string);
  },
  {
    /* Inner unwind-block */
  }
     );
  
  printf("%s\n", buf);
  free(buf);
},
{
  /* Outer unwind-block */
}
   );

/* End of File */
</pre>
</BODY>
</HTML>
