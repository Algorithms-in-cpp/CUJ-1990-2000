<HTML><HEAD>
<TITLE>February 1994/Code Capsules/Listing 8</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 8<I> Builds a variable format string by passing a </I>va_list<I> to </I>vfprintf</A></h4>
<pre>/* fatal.c: Exit program with an error message */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdarg.h&gt;
#include &lt;string.h&gt;

void fatal(char *fmt, ...)
{
   va_list args;
   
   if (strlen(fmt) &gt; 0)
   {
      va_start(args,fmt);
      vfprintf(stderr,fmt,args);
      va_end(args);
   }
   exit(1);
}

/* End of File */
</pre>
</BODY>
</HTML>
