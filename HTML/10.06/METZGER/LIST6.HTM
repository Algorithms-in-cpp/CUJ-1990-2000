<HTML><HEAD>
<TITLE>June 1992/Pointer Target Tracking/Listing 6</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 6</A></h4>
<pre>#define DM2init                     struct DM2 \
       { int rows, cols; double * data; }

#define DM2type                 struct DM2

DM2init;

DM2type DM2alloc(DM2type *p, int r, int c) {
   p-&gt;rows = r;
   p-&gt;cols : c;
   p-&gt;data = (double *)
      malloc((unsigned)r*c*sizeof(double));

   return *p;
}

#define DM2item(x,i,j)         x.data[i*x.cols+j]

void DM2free(DM2type * x) {
   free((void *)x-&gt;data);
}

main()
{
   DM2type m;
   int i,j;

   DM2alloc(&amp;m, 7,13);
   for(i=0; i&lt;7; ++i)
      for(j=0; j&lt;13; ++j)
         DM2item(m,i,j) = (double) (i*100)+j;

   for(i=0; i&lt;7; ++i) {
      for(j=0; j&lt;13; ++j)
         printf("%3g ",DM2item(m,i,j) );
      printf("\n");
   }
   DM2free(&amp;m);
}

/* End of File */
</pre>
</BODY>
</HTML>
