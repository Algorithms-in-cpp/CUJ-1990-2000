<HTML><head><TITLE>January 1991/We Have Mail/Listing 1</TITLE></head><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="0049_0027"><A name="0049_0027">Listing 1<A name="0049_0027"></h4><P>
<pre>/*  show.c - Demonstrates some character
   printing functions */
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;ctype.h&gt;

#define showx(a) printf(isprint(a) ? \
   "%c": "\\x%\.2x", a)

void
showc( int c )
{
   static char esc[ ] = "\a\b\t\n\r\f\v";
   static char *ptr[ ] = {
   "\\a", "\\b", "\\t", "\\n",
   " \\r ", " \\ f ", "\\v"
   };
   char *s = strchr(esc, c);
   
   if (s &amp;&amp; c)
      printf ( ptr[s-esc] );
   else
      showx( c );
}

void
showasciic(int c)
{
   static char *a[ ] = {
      "&lt;NUL&gt;", "&lt;SOH&gt;", "&lt;STX&gt;", "&lt;ETX&gt;",
      "&lt;EOT&gt;", "&lt;ENQ&gt;", "&lt;ACK&gt;", "&lt;BEL&gt;",
      "&lt;BS&gt;", "&lt;HT&gt;", "&lt;LF&gt;", "&lt;VT&gt;",
      "&lt;FF&gt;", "&lt;CR&gt;" "&lt;SO&gt;", "&lt;SI&gt;",
      "&lt;DLE&gt;", "&lt;DC1&gt;", "&lt;DC2&gt;", "&lt;DC3&gt;",
      "&lt;DC4&gt;", "&lt;NAK&gt;", "&lt;STN&gt;", "&lt;ETB&gt;",
      "&lt;CAN&gt;", "&lt;EM&gt;", "&lt;SUB&gt;", "&lt;ESC&gt;",
      "&lt;FS&gt;", "&lt;GS&gt;", "&lt;RS&gt;", "&lt;US&gt;"
   };
 
   static char b[ ] =
      " !\"#$%&amp;'( )*+,-./0123456789:;&lt;=&gt;?" \
      "@ABCDEFGHIJKLMNOPQRSTUVWXYZ [\\]^" \
      "'abcdefghijklmnopqrstuvwxyz{|}~";

   if (c &amp; ~0x7f) ( /* not ASCII */
      printf ("&lt;");
      showx(c);
      printf ("?&gt;");
   }
   else { /* ASCII */
   if {c == 0x7f)/* DEL */
      printf ("&lt;DEL&gt;");
   else if (c &amp; ~0xlf) /* graphic */
      putchar(b[c-32]);
   else /* control */
      printf (a[a]);
   }
}

void
main(void)
{
   int c;
   
   for (c = -1; c &lt; 129; c++)
         showc (c);
   putchar ('\n');
   
   for (c=-1; c&lt;129; c++)
      showascii(c);
   putchar { ' \n ' );
}
</pre>
</BODY>
</HTML>
