<HTML><HEAD>
<TITLE>April 1991/Standard C/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 (xsetloc.c)</a></h4>
<pre>/* _Setloc function */
#include &lt;ctype.h&gt;
#include &lt;limits.h&gt;
#include &lt;locale.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

/* set category for locale */
struct lconv *_Setloc(int cat, struct lconv *p)
   {
   switch (cat)
      {  /* set a category */
   case LC_COLLATE:
      break;
   case LC_CTYPE:
      _Ctype = p-&gt;_Ctype;
      _Tolower = p-&gt;_Tolower;
      _Toupper = p-&gt;_Toupper;
      break;
   case LC_MONETARY:
      _Locale.currency_symbol = p-&gt;currency_symbol;
      _Locale.int_curr_symbol = p-&gt;int_curr_symbol;
      _Locale.mon_decimal_point = p-&gt;mon_decimal_point;
      _Locale.mon_grouping = p-&gt;mon_grouping;
      _Locale.mon_thousands_sep = p-&gt;mon_thousands_sep;
      _Locale.negative_sign = p-&gt;negative_sign;
      _Locale.positive_sign = p-&gt;positive_sign;
      _Locale.frac_digits = p-&gt;frac_digits;
      _Locale.int_frac_digits = p-&gt;int_frac_digits;
      _Locale.n_cs_precedes = p-&gt;n_cs_precedes;
      _Locale.n_sep_by_space = p-&gt;n_sep_by_space;
      _Locale.n_sign_posn = p-&gt;n_sign_posn;
      _Locale.p_cs_precedes = p-&gt;p_cs_precedes;
      _Locale.p_sep_by_space = p-&gt;p_sep_by_space;
      _Locale.p_sign_posn = p-&gt;p_sign_posn;
      break;
   case LC_NUMERIC:
      _Locale.decimal_point = p-&gt;decimal_point[0] != '\0'
         ? p-&gt;decimal_point : ".";
      _Locale.grouping = p-&gt;grouping;
      _Locale.thousands_sep = p-&gt;thousands_sep;
      break;
   case LC_TIME:
      break;
      }
   return (p);
   }</pre>

</BODY>
</HTML>
