<HTML><HEAD>
<TITLE>April 1991/Some Small C++ Classes/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 (testbyte.cpp)</A></h4>
<pre>/*****************************************************************/
/*     Test byte and word classes. Copyright Joe Schell 1989.    */
/*****************************************************************/

#include &lt;byte.hpp&gt;

#define comp(c,i)  (((c) == int(i)) ? "okay.\n" : "not okay.\n")

void test_init(int c) {cout &lt;&lt; "  Initialization is " &lt;&lt; comp(c,3);}
void test_inc(int c)  { cout &lt;&lt; "  Increment is" &lt;&lt; comp(c,4); }
void test_dec(int c)  { cout &lt;&lt; "  Decrement is" &lt;&lt; comp(c,3); }
void test_eql(int c)  { cout &lt;&lt; "  Equal for int is " &lt;&lt; comp(c,3);}


main()
{
   cout &lt;&lt; "Testing byte and word class.\n";

   byte b, c=3, *d;
   char *test_byte = "abc";

   cout &lt;&lt; "Byte:( should be 03, result=" &lt;&lt; c.make_string() &lt;&lt; ")\n";
   test_init(c);
   c++;    test_inc(c);
   c--;    test_dec(c);
   b=c;    test_eql(b);
   c=4;
   cout &lt;&lt; "  Setting equal to integer is " &lt;&lt; comp(c,4);

   b=c;
   c++;
  cout &lt;&lt; "  Comparison of bytes is"
      &lt;&lt; ((b!=c) ? "okay." : "not okay.") &lt;&lt; "\n";
  d = (byte*)test_byte;
  cout &lt;&lt; "  Pointing is" &lt;&lt; comp(*d,*test_byte);
  d++;
  cout &lt;&lt; "  Incrementing pointer is " &lt;&lt; comp(*d,*(test_byte+1));


  word x, y=3, *z;
  int test_word=8;
  cout &lt;&lt; "\nWord:( should be 0003, result="
      &lt;&lt; y.make_string() &lt;&lt; ")\n";
  test_init(y);
  y++;    test_inc(y);
  y--;    test_dec(y);
  x=y;    test_eql(x);
  y++;
  cout &lt;&lt;"    Comparison of words is"
     &lt;&lt; ((x!=y) ? "okay." :"not okay.") &lt;&lt; "\n";
  z = (word*)(&amp;test_word);
  cout &lt;&lt; "   Pointer to word is" &lt;&lt; comp(*z,test_word);
  (*z)++;
  cout &lt;&lt; "   Dereference and increment is " &lt;&lt; comp(*z,9);

  // The next two lines should cause 'Illegal values' when
   // not commented.
  // b=UCHAR_MAX + 1;
  // x=(long)UINT_MAX + 1;

  cout &lt;&lt; "\nTest is finished.\n";
}
</pre>
</BODY>
</HTML>
