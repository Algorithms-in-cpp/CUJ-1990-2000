



<HTML><HEAD>

<TITLE>March 1996/Estimating Time-To-Transfer/Listing 1</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<p><tt>Listing 1:	Class TCountDownClock</tt><br>
<tt>#define SECOND          long</tt><br>
<tt>#define MILLISECOND     long</tt><br>
<tt>#define kHistoryEntries 10</tt><br>
<tt>#define kInitialWait    30</tt><br>
<tt>class TCountDownClock</tt><br>
<tt>{</tt><br>
<tt>public: // public member functions</tt><br>
<tt> TCountDownClock(long lBytesToTransfer);</tt><br>
<tt> SECOND TimeRemaining(long lBytesTransfered);</tt><br>
<tt> void Start(void);</tt><br>
<tt>protected: // protected member functions</tt><br>
<tt> void  StoreTransferRate(float fTransferRate);</tt><br>
<tt> float CalculateTransferRate(float fOverallAvg);</tt><br>
<tt> float WeighRecentRates(void);</tt><br>
<tt>protected: // protected data members</tt><br>
<tt> long m_lIntervalCount;</tt><br>
<tt> MILLISECOND m_msStartTime;</tt><br>
<tt> MILLISECOND m_msLastTime;</tt><br>
<tt> long m_lBytesToTransfer; </tt><br>
<tt> long m_lLastBytes;</tt><br>
<tt> int m_nRatesStored;</tt><br>
<tt> float m_fTransRateHistory[kHistoryEntries];</tt><br>
<tt>};</tt><br>
<tt>// ---------------------------------------
</tt></p>
</body></html>
