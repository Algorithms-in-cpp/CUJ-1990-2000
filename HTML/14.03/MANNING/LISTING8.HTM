






<HTML>
     
     <HEAD>


          
          <TITLE>March 1996/Uncertainty Propagation in C++/Listing 8</TITLE>
     </HEAD>
     
     <BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
          
          <H4>Listing 8: atan2()</H4>

<PRE>

UDouble&lt;is_correlated&gt;  atan2(const  UDouble&lt;is_correlated&gt;&amp;  arg1,
                              const  UDouble&lt;is_correlated&gt;&amp;  arg2)
{
   UDouble&lt;is_correlated&gt;  retval;
   double  slope1  =  1.0,  slope2  =  1.0;
   double  sum2  =  arg2.value  *  arg2.value  +  arg1.value  *  arg1.value;
   
   if  (sum2  !=  0.0)
   {
       slope1  =  arg2.value  /  sum2;
       slope2  =  -arg1.value  /  sum2;
   }
   if  (is_correlated)
       retval.uncertainty  =  slope1  *  arg1.uncertainty
                           +  slope2  *  arg2.uncertainty;
   else
       retval.uncertainty  =  hypot(slope1  *  arg1.uncertainty,
                                    slope2  *  arg2.uncertainty);
   retval.value  =  atan2(arg1.value,  arg2.value);
   return  retval;
}
//End of File
</PRE>
     </BODY>
</HTML>
