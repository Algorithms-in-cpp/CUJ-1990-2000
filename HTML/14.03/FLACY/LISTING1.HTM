



<HTML><HEAD>

<TITLE>March 1996/A Small Combination Generator/Listing 1</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4>
<A name="HEADING1">Listing 1: Combination generator</A></h4>


<pre>

void combin(long n, void (* emit) (unsigned char), 
                    void (* delimit) () ) 
{
   register unsigned long comb,
                          N = n;
                          mask;
                          element,
                          two_exp_n,
/* Test that n is not too large  */
   for (comb = 1;comb &lt;= N; comb++){
     two_exp_n = two_exp_n &lt;&lt; 1;
     if (two_exp_n &lt;= 0){     	
       printf("n too large for this machine.\n");
       exit(1);
     }
   }
/* For each of 2^n combinations . . .   */
   for (comb = 1;comb &lt;= two_exp_n; comb++){
     mask = 1;
     delimit();
/* . . . emit the elements of that combination. */
     for (element = 1; element &lt; = N; element++){
       if (mask &amp; comb) emit((unsigned char)element);
       mask = mask &lt;&lt; 1;
     } 
   }
}
</pre>
</body></html>
