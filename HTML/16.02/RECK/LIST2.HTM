


<HTML><HEAD>

<TITLE>February 1998/Thread Synchronization with Reference-Counting Handles/Listing 2</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4>
<A name="HEADING1">Listing 2: The AddressRep class for the fax application</A></h4>


<pre>
// Copyright (c) 1997 by Bill Reck &lt;breck@magna.com.au&gt;
// This code may be used royalty-free as long as
// this notice appears in the product.

#include &lt;string&gt;
template &lt;class SUPER&gt;
class AddressRep : public SUPER {
    // This is a *very* simple/silly address record class
public:
    AddressRep() : firstName_(), faxedCount_(0) {}
    std::string firstName() const { return(firstName_.c_str()); }
    void firstName(const std::string &amp;n) { firstName_ = n.c_str(); }
    void fax() {       // FAX Simulator
        ::Sleep(100);  // Faxing takes time ;-)
        ::printf("%d) Sending a FAX to %s...\n",
                 ++faxedCount_, firstName_.c_str());
    }
private:
    std::string firstName_;
    int faxedCount_;
};
//End of File
</pre>
</body></html>
