<HTML><HEAD><TITLE>March 1990/Dr. C's Pointers/Listing 1</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="00A0_005A"><A name="00A0_005A">Listing 1<A name="00A0_005A"></h4><P>
<pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

/* structure type flag values */

#define TYPENONE   0    /* Not pointing at an object */
#define TYPECHAR   1    /* char */
#define TYPEINT    2    /* int */
#define TYPELONG   3    /* long */
#define TYPEDOUBLE 4    /* double */

struct node {
   struct node *pfwd;  /* forward ptr */
   struct node *pbwd;  /* backward ptr */
   void *pobject;      /* ptr to object */
   unsigned int objtype;   /* indicate object type */
};

main()
{
   char c = 'A';
   int i = 10;
   long int 1 = 123456;
   double d = 123.45;
   struct node *pnode;

   pnode = malloc(sizeof(struct node));

/* let's point to a double */

   pnode-&gt;pobject = &amp;d;
   pnode-&gt;objtype = TYPEDOUBLE;
   pnode-&gt;pfwd = NULL;
   pnode-&gt;pbwd = NULL;

/* at a later point, let's process the object to which we point */

   switch (pnode-&gt;objtype) {

   case TYPECHAR:
      printf ("char: %c\n", *(char *)pnode-&gt;pobject);
      break;

   case TYPEINT:
      printf("int: %d\n", *(int *)pnode-&gt;pobject);
      break;

   case TYPELONG:
      printf("long: %ld\n", *(long *)pnode-&gt;pobject);
      break;

   case TYPEDOUBLE:
      printf("double: %f\n", *(double *)pnode-&gt;pobject);
      break;

   case TYPENONE:
      printf ("none:\n");
      break;
   }
}

The output generated by this program is:
double: 123.450000
</pre>
</BODY>
</HTML>
