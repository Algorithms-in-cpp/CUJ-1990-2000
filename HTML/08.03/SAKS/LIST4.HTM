<HTML><HEAD><TITLE>March 1990/Writing Your Own Standard Headers: <stdlib.h>, <stddef.h>, <stdarg>/Listing 4</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="0096_005D"><A name="0096_005D">Listing 4<A name="0096_005D"></h4><P>
<pre>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
#include &lt;string.h&gt;

/*
 * Concatenate copies of a variable number strings into
 * s1. The list of strings must be terminated by NULL.
 * concat returns s1.
 */
char *concat(char *s1, ...)
    {
    char *s = s1;
    const char *t;
    va_list ap;

    va_start(ap, s1);
    while ((t = va_arg(ap, const char *)) != NULL)
        {
        strcpy(s, t);
        s += strlen(s);
        }
    va_end(ap);
    return s1;
    }

int main(void)
    {
    char s[100];

    puts(concat(s, "This ", "is ", "great!", NULL));
    return 0;
    }
</pre>
</BODY>
</HTML>
