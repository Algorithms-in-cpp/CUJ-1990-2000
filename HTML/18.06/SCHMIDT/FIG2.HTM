<HTML><HEAD>
<TITLE>June 2000/Uncaught Exceptions/Figure 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 2: Undefined behavior banished</A></h4>
<pre>
//
//    C.h
//
#include &lt;memory&gt;

class CImpl;

class C
    {
public:
    C();
    ~C(); // &lt;== new
private:
    std::auto_ptr&lt;CImpl&gt; pimpl_;
    };

//
//    C.cpp
//
#include "C.h"

class CImpl
    {
    // ...
    };

C::C() : pimpl_(new CImpl)
    {
    }

C::~C() // &lt;== new
    {
    }

//
//    main.cpp
//
#include "C.h"

int main()
    {
    C c;
    return 0;
    }
</pre></body></html>
