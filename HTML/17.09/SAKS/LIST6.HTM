<HTML><HEAD>
<TITLE>September 1999/C++ Theory and Practice/Listing 6</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 6: The line_number_sequence non-inline member definitions</A></h4>
<pre>
// sequence.cpp

#include &lt;stdio.h&gt;

#include "deep.h"
#include "sequence.h"

struct line_number_sequence::list_node
    {
    unsigned number;
    deep_pointer&lt;list_node&gt; next;
    };

line_number_sequence::
line_number_sequence(unsigned n)
    {
    first = new list_node;
    first-&gt;number = n;
    first-&gt;next = NULL;
    last = first;
    }

void line_number_sequence::add(unsigned n)
    {
    if (n != last-&gt;number)
        {
        last-&gt;next = new list_node;
        last = last-&gt;next;
        last-&gt;number = n;
        last-&gt;next = NULL;
        }
    }

void line_number_sequence::put() const
    {
    list_node const *p;
    for (p = first; p != NULL; p = p-&gt;next)
        printf(" %4d", p-&gt;number);
    }

</pre>
</BODY>
</HTML>
