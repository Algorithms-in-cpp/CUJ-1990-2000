<HTML><head><TITLE>December 1990/Using The C Preprocessor For Device Control/Listing 2</TITLE></head><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="0274_016E"><A name="0274_016E">Listing 2 (mfp_macs.h) Macro Definitions<A name="0274_016E"></h4><P>
<pre>       /* cast operation for register references */
#define REGVAL(x)             (*(unsigned char *)(x))

       /* create bit mask for one bit on/off */
#define BITON_MASK(bitnum)    (1 &lt;&lt; (bitnum))
#define BITOFF_MASK(bitnum)   (<SUP>~</SUP>(1 &lt;&lt; (bitnum)))

       /* use given mask to set/clear bits in given byte */
#define SET_BITS(byte,mask)    REGVAL(byte) |= (mask)
#define CLR_BITS(byte,mask)    REGVAL(byte) &amp;= (mask)

       /* set/clear given bit number in byte */
#define BIT_SET(byte,bitnum)   REGVAL(byte) |= (BITON_MASK(bitnum))
#define BIT_CLR(byte, bitnum)  REGVAL(byte) &amp;= (BITOFF_MASK(bitnum))
</pre>
</BODY></HTML>
