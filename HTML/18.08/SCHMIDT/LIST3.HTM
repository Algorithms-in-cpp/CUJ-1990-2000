<HTML><HEAD>
<TITLE>August 2000/Uncaught Exceptions/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3: Self-describing exception</A></h4>
<pre>
#include &lt;iostream&gt;
#include &lt;string&gt;

struct oops
    {
    std::string creator;
    std::string reason;
    };

void f()
    {
    bool some_problem_occurred(false);
    oops e;
    // ...
    if (some_problem_occurred)
        {
        e.creator = "void f()";
        e.reason = "some problem occurred";
        throw e;
        }
    }

// ...

int main()
    {
    try
        {
        f();
        }
    catch (oops const &amp;e)
        {
        std::cout &lt;&lt; e.creator &lt;&lt;
                " threw because " &lt;&lt;
                e.reason &lt;&lt; std::endl;
        }
    }
</pre></body></html>
