<HTML><HEAD>
<TITLE>February 1995/Using Associative Arrays/Listing 10</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 10 <I>3D Sparse Array Program</A></I></h4>
<pre>#include "aa.h"

typedef struct { long i; long j; long k; } INDEX;
static INDEX t; /* temporary used in SPARSE macro */
#define SPARSE(x,y,z) (*(t.i=x,t.j=y,t.k=z, \
                  (double *)aa_addr(sparse_id,&amp;t)))
main()
{
  unsigned int i,j,k;
  AA *sparse_id=aa_create(BINARY_KEY,sizeof(INDEX),
                      sizeof(double),500,NULL);
  for (i=0; i&lt;=10000; i+=2000)
    for (j=0; j&lt;=10000; j+=2000)
      for (k=0; k&lt;=10000; k+=2000) {
        SPARSE(i,j,k)=(i+j+k) * 0.0001;
        printf("SPARSE(%5d,%5d,%5d)\t=\t%f\n",
              i,j,k,SPARSE(i,j,k));
      }
}
/* End of File */</pre>

</BODY>
</HTML>
