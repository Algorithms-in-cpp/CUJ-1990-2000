<HTML><HEAD>
<TITLE>February 1995/Using Associative Arrays/Listing 6</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 6 <I>Retrieving the Keys</I></A></h4>
<pre>/*&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Return all keys in AA &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;*/
void aa_keys(aa,keys,num)
AA * aa;        /* input -- AA definition */
void ***keys;   /* output -- array of key pointers */
int *num;       /* output -- number of keys returned */
{
  register int i;
  register void **ptr;
  size_t buf_size=aa-&gt;current_elements*sizeof(void **);
  
  if (*keys=(void **)malloc(buf_size)) {
     *num=0; ptr=aa-&gt;keys;
     for (i=0; i&lt;aa-&gt;max_elements; i++,ptr++)
        if (VALID_KEY(*ptr))
          (*keys)[(*num)++]=*ptr;
  } else /* allocation failed */
     *num=-1;
}
/* End of File */
</pre>
</BODY>
</HTML>
