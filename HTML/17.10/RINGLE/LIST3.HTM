<HTML><HEAD>
<TITLE>October 1999/Singleton Creation the Thread-safe Way/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3:	A singleton that creates an instance as a local static object</A></h4>
<pre>
// try2.h
class Singleton
{
public:
   static Singleton&amp; instance();
   void show_state();

protected:
   Singleton();

private:
   int state;
};

Singleton&amp; Singleton::instance()
{
   static Singleton _instance;
   return _instance;
}


</pre>
</BODY>
</HTML>
