<HTML><HEAD><TITLE>December 1991/PC UART Device Driver/Sidebar</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h3 align="center"><FONT FACE="Garamond" COLOR="#000080">Use Of I/O Delays</FONT></h3><hr>
<BLOCKQUOTE>
In most cases, the main CPU in a system will be significantly faster than the UART. Because of the timing characteristics of the UART (this applies to many other peripheral chips as well), some settling time is required between successive accesses to the chip's registers. On 80386 and earlier CPUs, executing a minimum of two CPU instructions between successive accesses to the UART seems to be sufficient (the 80486 may require additional instructions due to the way it pipelines instructions and does some of the execution in parallel). Where possible, I have interspersed other instructions between UART accesses to provide this delay. Where this was not possible, I have utilized an <I>IO_DELAY</I> macro. This macro takes a <I>count</I> parameter and executes a loop <I>count</I> number of times. During each loop, the <I>count</I> is <I>and</I>ed with a dummy variable. This is done to inhibit the compilers loop optimization (which would otherwise recognize the loop as doing nothing and optimize it out completely!).<P>
</BLOCKQUOTE>
</BODY>
</HTML>
