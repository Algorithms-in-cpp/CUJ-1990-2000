<HTML><HEAD>
<TITLE>February 1993/Standard C/Listing 6</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 6 xgettime.c</A></h4>
<pre>/* _Gettime function */
#include &lt;string.h&gt;
#include "xtime.h"

const char *_Gettime(const char *s, int n, int *len)
       {       /*      get time info from environment */
       const char delim = *s ? *s++ : '\0';
       const char *s1;

       for (; ; --n, s = s1 + 1)
              {       /* find end of current field */
              if ((s1 = strchr(s, delim)) == NULL)
                     s1 = s + strlen(s);
              if (n &lt;= 0)
                     {       /* found proper field */
                     *len = s1 - s;
                     return (s);
                     }
              else if (*s1 == '\0')
                     {      /* not enough fields */
                     *len = 1;
                     return (s1);
                     }
              }
       }
/* End of File */
</pre>
</BODY>
</HTML>
