<HTML><HEAD>
<TITLE>May 1993/Code Capsules/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3 <I>Copies binary files</I></A></h4>
<pre>/* copy5.c */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

main(int argc, char *argv[])
{
   if (argc == 3)
   {
      char buf[BUFSIZ];
      FILE *inf, *outf;

      if ((inf = fopen(argv[1],"rb")) == NULL)
          return EXIT_FAILURE;

      if ((outf = fopen(argv[2],"wb")) == NULL)
          return EXIT_FAILURE;

      while (!feof(inf))
      {
          int nitems = fread(buf,1,BUFSIZ,inf);
          if (fwrite(buf,1,nitems,outf) != nitems)
              return EXIT_FAILURE;
      }

      fclose(inf);
      fclose(outf);
      return EXIT_SUCCESS;
   }
   else
      return EXIT_FAILURE;
}

/* End of File */
</pre>
</BODY>
</HTML>
