<HTML><HEAD>
<TITLE>May 1993/Code Capsules/Listing 9</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 9 <I>Template for a program to print a directory listing</I></A></h4>
<pre>/* list.c: List directory*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;ctype.h&gt;

int Order = 1,
    Full = 0;

static void dir(char *);

main(int argc, char **argv)
{
    char *p;

    /* Process options */
    while (--argc &amp;&amp; **++argv == '-')
    {
       for (p = *argv+1; *p; ++p)
          switch(toupper(*p))
          {
             case 'L':
                Full = !Full;
                break;
             case 'R':
                Order = -1;
                break;
             default:
                fprintf(stderr,
                  "list: Invalid flag: %c\n",*p);
                return EXIT_FAILURE;
          }
    }

    /* List all files by default */
    if (argc == 0)
       dir("*.*");
    else
       while (argc--)
          dir(*argv++);
}

static void dir(char *template)
{
    /* Replace this stub with working code */
    fprintf(stderr,"Dir: %s (Order = %d, Full = %d)\n",
      template,Order,Full);
}

/* End of File */
</pre>
</BODY>
</HTML>
