<HTML><HEAD>
<TITLE>May 1993/Code Capsules/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1 <I>A copy filter that allows redirection</I></A></h4>
<pre>/* copy2.c */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

main(int argc, char *argv[])
{
   char s[BUFSIZ];

   /* Open optional input file */
   if (argc&gt; 1)
      if (freopen(argv[1],"r",stdin) == NULL)
         return EXIT_FAILURE;

   /* Open optional output file */
   if (argc &gt; 2)
      if (freopen(argv[2],"w",stdout) == NULL)
         return EXIT_FAILURE;

   while (gets(s))
      puts(s);
   return EXIT_SUCCESS;
}

/* End of File */
</pre>
</BODY>
</HTML>
