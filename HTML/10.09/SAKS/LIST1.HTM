<HTML><HEAD>
<TITLE>September 1992/Stepping Up To C++/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1</A></h4>
<pre>#include &lt;iostream.h&gt;

class X
   {
   friend ostream &amp;operator&lt;&lt;(ostream &amp;os, const X &amp;x);
public:
   X(int i) : a(i), b(0) { }
   X(X &amp;x) : a(x.a), b(x.b) { ++x.b; }
   X(const X &amp;x) : a(x.a), b(x.b+1) { }
private:
   int a, b;
   };

ostream &amp;operator&lt;&lt;(ostream &amp;os, const X &amp;x)
   {
   return os &lt;&lt; '(' &lt;&lt; x.a &lt;&lt; ", "&lt;&lt; x.b &lt;&lt; ')';
   }

int main()
   {
   X x1(3);        // uses X(int)
   
   cout &lt;&lt; "x1 = " &lt;&lt; x1 &lt;&lt; '\n';
   
   const X x2(x1); // uses X(X &amp;)
   
   cout &lt;&lt; "x1 = " &lt;&lt; x1 &lt;&lt; '\n';
   cout &lt;&lt; "x2 = " &lt;&lt; x2 &lt;&lt; '\n';
   
   X x3(x2);       // uses X(const X &amp;)
   
   cout &lt;&lt; "x2 = " &lt;&lt; x2 &lt;&lt; '\n';
   cout &lt;&lt; "x3 = " &lt;&lt; x3 &lt;&lt; '\n';
   return 0;
   }
// End of file
</pre>
</BODY>
</HTML>
