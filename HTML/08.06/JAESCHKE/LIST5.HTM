<HTML><HEAD><TITLE>June 1990/Dr. C's Pointers/Listing 5</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="0159_00CB"><A name="0159_00CB">Listing 5<A name="0159_00CB"></FONT></h4><P>
<pre>#include &lt;stdio.h&gt;</FONT>
#include &lt;stdlib.h&gt;</FONT>
#include &lt;signal.h&gt;</FONT>
#include &lt;assert.h&gt;</FONT>

void eh(void);</FONT>
void abort_hand(void);</FONT>

main()</FONT>
{</FONT>
   char c;</FONT>

   atexit(eh);</FONT>
   if {signal(SIGABRT, abort_hand) == SIG_ERR) {</FONT>
      printf("Can't register abort_hand\n");
      exit(1);
   }</FONT>

   printf("Enter A (abort), E (exit): ");</FONT>
   c = getchar();</FONT>

   assert(c != 'A');</FONT>
}</FONT>

void eh(void)</FONT>
{</FONT>
   printf("Inside eh\n");</FONT>
}</FONT>

void abort_hand(void)</FONT>
{</FONT>
   printf("Inside abort_hand\n");</FONT>
   exit(2);</FONT>
}</FONT></pre>

</BODY>
</HTML>
