<HTML><HEAD><TITLE>June 1990/Dr. C's Pointers/Listing 3</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="0159_00C7"><A name="0159_00C7">Listing 3<A name="0159_00C7"></FONT></h4><P>
<pre>#include &lt;stdio.h&gt;</FONT>
#include &lt;stdlib.h&gt;</FONT>

#define SET 1</FONT>
#define CLEAR 0</FONT>

void eh(void);</FONT>

struct status_flags {</FONT>
   unsigned f0 : 1;</FONT>
   unsigned f1 : 1;</FONT>
   unsigned f2 : 1;</FONT>
   unsigned f3 : 1;</FONT>
} flags = {</FONT>
   CLEAR, CLEAR, CLEAR, CLEAR</FONT>
};</FONT>
main()</FONT>
{</FONT>
   atexit(eh);</FONT>
   flags.f2 = 1;</FONT>
   flags.f3 = 1;</FONT>
}</FONT>

void eh(void)</FONT>
{</FONT>
   if (flags.f0 == SET)</FONT>
      printf("f0 needs cleanup\n");
   if (flags.f1 == SET)</FONT>
      printf("f1 needs cleanup\n");
   if (flags.f2 == SET)</FONT>
      printf("f2 needs cleanup\n");
   if (flags.f3 == SET)</FONT>
      printf("f3 needs cleanup\n");
}</FONT>

f2 needs cleanup</FONT>
f3 needs cleanup</FONT>
</pre>
</BODY>
</HTML>
