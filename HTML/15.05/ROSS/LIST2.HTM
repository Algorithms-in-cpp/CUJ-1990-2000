



<HTML><HEAD>

<TITLE>May 1997/Sockets: Down and Dirty Programming for the Web/Listing 2</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4>Listing 2:	Function geturl</h4>

<pre>

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;

void getURL(char **argv, char *hostName,
            char *resource, int *httpPort)
{
  char buf[512];
  char *cp;

  /* parse URL from arg 1 */
  if (cp = strstr(argv[1], "//")) 
    strcpy(buf, cp+2);   /* skip protocol */
  else
    strcpy(buf, argv[1]);
  strcpy(resource, "/");
  if (cp = strchr(buf, '/'))
  { *cp = '\0';
    strcat(resource, cp+1);
  }
  strcpy(hostName, buf);
  if (cp = strchr(hostName, ':'))
  { *cp = '\0';
    *httpPort = atoi(cp+1);
  }
  
}
/* End of File */
</pre>
</body></html>
