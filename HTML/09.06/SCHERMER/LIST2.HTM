<HTML><HEAD>
<TITLE>June 1991/Word Counting/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2</A></h4>
<pre>//textgen.cpp
//creates random ASCII text files for testing purposes

#include &lt;stdio.h&gt;
#include &lt;stream.hpp&gt;
#include &lt;stdlib.h&gt;

main()
{
   char ch, filename[13];
   int p, q = 0, nblanks = 0;
   unsigned long i, j = 1, nchar;

   cout &lt;&lt; "Type name for testfile\n";
   cin &gt;&gt; filename;
   cout &lt;&lt; "Type number of characters including whitespace\n";
   cin &gt;&gt; nchar;

   char *text = new char[nchar-1];
   if (!text) cout &lt;&lt; "Out of heap memory\n";
   filebuf file1;
   file1.open(filename,output);
   ostream output_file(&amp;file1);

   for (i = 0; i &lt; nchar; i++){
      p = 33 + (94.0 * rand() / 32768.0);
              //generate random numbers between 33 and 126
      if (i == j){         //create words 1-10 chars long
         p = 32;
         q = 1 + (11.0 * rand() / 32768.0);
         j = j + q;
         ++nblanks;
         }
      text[i] = p;
      cout &lt;&lt; text[i];
      output_file &lt;&lt; text[i];
      }
   cout &lt;&lt; "\n" &lt;&lt; "nblanks = " &lt;&lt; nblanks;
   delete text;
}

/* End of File */</pre>

</BODY>
</HTML>
