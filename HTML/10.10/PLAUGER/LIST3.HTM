<HTML><HEAD>
<TITLE>October 1992/Standard C/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3 <I>memmove.c</I></A></h4>
<pre>/* memmove function */
#include &lt;string.h&gt;

void *(memmove)(void *s1, const void *s2, size_t n)
   {   /* copy char s2[n] to s1[n] safely */
   char *sc1 = (char *)s1;
   const char *sc2 = (const char *)s2;

   if (sc2 &lt; sc1 &amp;&amp; sc1 &lt; sc2 + n)
      for (sc1 += n, sc2 += n; 0 &lt; n; ----n)
         *----sc1= *----sc2;  /*copy backwards */
   else
      for (; 0 &lt; n; ----n)
         *sc1++ = *sc2++;  /* copy forwards */
   return (s1);
   }
</pre>
</BODY>
</HTML>
