<HTML><HEAD>
<TITLE>December 1992/Code Capsules/Listing 7</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 7 <B></B>token3.c<B><I></B> &#151; uses </I><B></B>strchr<B><I></B> to extract fields separated by commas</A></I></h4>
<pre>/* token3.c:  Read comma-delimited fields */

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

main()
{
   char s[81];

   while (gets(s))
   {
       char *p, *sp = s;
       int nchars;
       
       do
       {
          /* Make p point at next comma, or '\0'*/
          if ((p = strchr(sp,',')) == NULL)

             p = sp + strlen(sp);
          nchars = p - sp;

          /* Print the field */
          if (sp &gt; s)
             putchar(',');
          printf("\"%.*s\"",nchars,sp);

          /* Position at start of next field */
          sp = p+l;
       } while (*p ! = '\0');

       putchar('\n');
   }

   return O;
}
/* End of File */</pre>

</BODY>
</HTML>
