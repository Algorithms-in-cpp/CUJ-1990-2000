<HTML><HEAD>
<TITLE>December 1992/Code Capsules/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 <B></B>strtokf.c<B><I></B> &#151; recognizes tokens via a user-supplied function that identifies acceptable characters</A></I></h4>
<pre>/* strtokf.c: Collect tokens via a function */

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

static char *sp = NULL; /* Internal string position */

char*strtokf(char*s, int (*f)(char))
{
   if (s != NULL)
      sp= s;     /* Remember string address */
   if (sp == NULL)
      return NULL;  /* No string supplied */

   /* Skip leading, unwanted characters */
   while (*sp != '\0' &amp;&amp; !f(*sp))
      ++sp;
   s = sp;             /* Token starts here */

   /* Build token */
   while (*sp != '\0' &amp;&amp; f(*sp))
      ++sp;
   if (*sp != '\0')
      *sp++ = '\0'; /* Insert string terminator */

   return strlen(s) ? s : NULL;
}

/* End of File */
</pre>
</BODY>
</HTML>
