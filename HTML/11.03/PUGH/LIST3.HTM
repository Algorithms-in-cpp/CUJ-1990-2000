<HTML><HEAD>
<TITLE>March 1993/Questions & Answers/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3 <I>Code using</I> goto <I>to consolidate error-handling code</I></A></h4>
<pre>    int SomeFunc(void)
        {
        char    *buf1,  *buf2,  *buf3;
        int     ccode;
        if ((buf1 = malloc(1024)) == NULL)
            {
            ccode = -1;
            goto End1;
            }
        if ((buf2 = malloc(1024)) == NULL)
            {
            ccode = -1;
            goto End2;
            }
        if ((buf3 = malloc(1024)) == NULL)
            {
            ccode = -1;
            goto End3;
            }
        //   More code here
End3:
        free(buf3);
End2:
        free(buf2);
End1:
        free(buf1);
        return(ccode);
        }

/* End of File */</pre>

</BODY>
</HTML>
