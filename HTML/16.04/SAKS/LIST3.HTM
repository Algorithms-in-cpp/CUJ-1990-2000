


<HTML><HEAD>

<TITLE>April 1998/C++ Theory and Practice/Listing 3</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4>
<A name="HEADING1">Listing 3: xr.c  main "typesafe C" source file using separate compilation</A></h4>


<pre>
// xr.cpp - generate a cross-reference of
// words
#include &lt;ctype.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

#include "cross_reference.h"

int get_token(char *s, size_t n);

#define MAX_TOKEN 256

int main()
  {
  char token[MAX_TOKEN];
  unsigned ln = 1;
  while (get_token(token, MAX_TOKEN) != EOF)
    if (isalpha(token[0])
    ||
        token[0] == '_')
      cross_reference_add(token, ln);
    else if (token[0] == '\n')
      ++ln;
  cross_reference_put();
  return 0;
  }

int get_token(char *s, size_t n)
  {
  ... same as in <A href="list2.htm">Listing 2</a>
...
  }
//End of File
</pre>
</body></html>
