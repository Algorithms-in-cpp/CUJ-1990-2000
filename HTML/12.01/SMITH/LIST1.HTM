<HTML><HEAD>
<TITLE>January 1994/A Short Floating- Point Type in C++/Listing 1</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 1 Definition of class <I>sfloat</I></A></h4>
<pre>#if !defined ( SFLOAT_DEFINED )
#define SFLOAT_DEFINED

union conv
   {
   float f;
   long l;
   unsigned short s[2];
   };

class sfloat
   {

private:
   // class data
   static unsigned long fManSignMask;
   static unsigned long fExpMask;
   static unsigned long fManMask;
   static unsigned short sfManSignMask;
   static unsigned short ManSign;
   static unsigned short Exp;
   static unsigned short Man;
   static unsigned short fBias;
   static unsigned short sfBias;
   static unsigned short fsfBias;
   static unsigned short Signed;
   static unsigned short fExpBits;
   static unsigned short sfExpBits;
   static unsigned short fManBits;
   static unsigned short sfManBits;
   static unsigned short fManSignBits;
   static unsigned short sfManSignBits;
   static unsigned short sfBits;
   static unsigned short fManShift1;
   static unsigned short fManShift2;
   static unsigned short sfManShift;
   static unsigned short fExpShift;
   static unsigned short sfExpShift;
   static unsigned short sfExpBitsMin;
   static unsigned short sfExpBitsMax;
   static union conv u;

protected:
   // object instance data
   unsigned short s;

public:
   // constructors
   sfloat();
   sfloat( float );
   sfloat( sfloat&amp; sf );

   // conversion
   operator float();

   // member function assignment operators
   sfloat &amp;operator+=( sfloat sf );
   sfloat &amp;operator-=( sfloat sf );
   sfloat &amp;operator*=( sfloat sf );
   sfloat &amp;operator/=( sfloat sf );

   // member function unary operators
   sfloat operator+();
   sfloat operator-();
   sfloat operator++();
   sfloat operator--();
   sfloat operator++( int );
   sfloat operator--( int );

   // friend function relational operators
   friend int operator==( sfloat sf1, sfloat sf2 );
   friend int operator&gt;=( sfloat sf1, sfloat sf2 );
   friend int operator&lt;=( sfloat sf1, sfloat sf2 );
   friend int operator&gt;( sfloat sf1, sfloat sf2 );
   friend int operator&lt;( sfloat sf1, sfloat sf2 );
   friend int operator!=( sfloat sf1, sfloat sf2 );

   // utility function
   friend void sfloatrange(
        unsigned short sfNumExpBits,
        unsigned short sfSigned );

   };   // class sfloat

// non-member function math operators
sfloat operator+( sfloat sf1, sfloat sf2 );
sfloat operator-( sfloat sf1, sfloat sf2 );
sfloat operator*( sfloat sf1, sfloat sf2 );
sfloat operator/( sfloat sf1, sfloat sf2 );

#include &lt;sfloat.inl&gt;

#endif

// End of SFLOAT.HPP
</pre>
</BODY>
</HTML>
