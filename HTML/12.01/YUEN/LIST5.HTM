<HTML><HEAD>
<TITLE>January 1994/Handling Time-Consuming Windows Tasks/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 <I>Header file for class Cthread</I></A></h4>
<pre>#ifndef __CTHREAD
#define __CTHREAD

#include &lt;setjmp.h&gt;

const int THD_MAX_STACK = 0x4000; /* maximum stack size allowed */

typedef void (* THDFN)(void);

typedef struct thd_type {
  jmp_buf Context;           /* context of thread */
  int TotalLen;              /* total length of structure */
  int Overflowed;            /* overflow guard */
  int Stack[THD_MAX_STACK];  /* stack of thread */
  } THD, *THDPTR;

class Cthread
{
private:

  THDPTR threadbody;

  Cthread(THDFN func, int stacksize, int *frame, int framesize);

  void Transfer(Cthread&amp; thread);

  ~Cthread(void);

  friend Cschlr;

};

#endif

// End of File
</pre>
</BODY>
</HTML>
