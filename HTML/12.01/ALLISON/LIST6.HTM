<HTML><HEAD>
<TITLE>January 1994/Code Capsules/Listing 6</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 6 <I>The bits class template interface</I></A></h4>
<pre>template&lt;unsigned long N&gt;
class bits
{
// Friends:
   // Global I/O funtions
   friend ostream&amp; operator&lt;&lt;(ostream&amp;, const bits&lt;N&gt;&amp;);
   friend istream&amp; operator&gt;&gt;(istream&amp;, bits&lt;N&gt;&amp;);
   
   // Global bitwise operators
   friend bits&lt;N&gt; operator&amp;(const bits&lt;N&gt;&amp;, const bits&lt;N&gt;&amp;);
   friend bits&lt;N&gt; operator|(const bits&lt;N&gt;&amp;, const bits&lt;N&gt;&amp;);
   friend bits&lt;N&gt; operator^(const bits&lt;N&gt;&amp;, const bits&lt;N&gt;&amp;);

public:
   // Constructors
   bits();
   bits(unsigned long n);
   bits(const bits&lt;N&gt;&amp; b);
   bits(const string&amp; s);

   // Conversions
   unsigned short to_ushort() const;
   unsigned long to_ulong() const;
   string to_string() const;

   // Assignment
   bits&lt;N&gt;&amp; operator=(const bits&lt;N&gt;&amp; rhs);

   // Equality
   int operator==(const bits&lt;N&gt;&amp; rhs) const;
   int operator!=(const bits&lt;N&gt;&amp; rhs) const;

   // Basic bit operations
   bits&lt;N&gt;&amp; set(size_t pos, int val = 1);
   bits&lt;N&gt;&amp; set();
   bits&lt;N&gt;&amp; reset(size_t pos);
   bits&lt;N&gt;&amp; reset();
   bits&lt;N&gt;&amp; toggle(size_t pos);
   bits&lt;N&gt;&amp; toggle();
   bits&lt;N&gt; operator~() const;
   int test(size_t n) const;
   int any() const;
   int none() const;

   // Bit-wise operators
   bits&lt;N&gt;&amp; operator&amp;=(const bits&lt;N&gt;&amp; rhs);
   bits&lt;N&gt;&amp; operator|=(const bits&lt;N&gt;&amp; rhs);
   bits&lt;N&gt;&amp; operator^=(const bits&lt;N&gt;&amp; rhs);

   // Shift operators
   bits&lt;N&gt;&amp; operator&lt;&lt;=(size_t n);
   bits&lt;N&gt;&amp; operator&gt;&gt;=(size_t n);
   bits&lt;N&gt; operator&lt;&lt;(size_t n) const;
   bits&lt;N&gt; operator&gt;&gt;(size_t n) const;

   size_t count() const;
   size_t length() const;
};

// End of File
</pre>
</BODY>
</HTML>
