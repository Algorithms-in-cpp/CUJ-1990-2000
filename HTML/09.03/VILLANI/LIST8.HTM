<HTML><HEAD>
<TITLE>March 1991/Building Embedded Systems With Turbo C/Listing 8</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 8</A></h4>
<pre>#
# makefile for example 0
#
# 12/02/90 1830 EST
#

CC = tcc
CFLAGS = -ms -v
AS = masm
ASFLAGS = /Mx/Zi
LD = tlink
LDFLAGS = /v/c

OBJSROM = start1.obj cio.obj osem.obj iolink.obj\
         hdwinit.obj prf.obj puts.obj gets.obj
LIBSROM = libm.lib

all:        ex0.exe ex0s.exe mon86.exe mon86r.exe

mon86.exe: mon86.obj
       $(CC) $(CFLAGS) -emon86 mon86

osem.obj: osem.c
       $(CC) $(CFLAGS) -c osem.c

mon86.obj: mon86.c
       $(CC) $(CFLAGS) -c mon86.c

iolink.obj: iolink.c
       $(CC) $(CFLAGS) -c iolink.c

prf.obj:    prf.c
       $(CC) $(CFLAGS) -c prf.c

puts.obj: puts.c
       $(CC) $(CFLAGS) -c puts.c

gets.obj: gets.c
       $(CC) $(CFLAGS) -c gets.c

start0.obj: start0.asm
       $(AS) $(ASFLAGS) start0,,,;

ex0s.exe: ex0.obj $(OBJSROM)
       $(LD) $(LDFLAGS) $(OBJSROM) ex0.obj,\
       ex0s,nul,$(LIBSROM)

mon86r.exe: mon86.obj $(OBJSROM)
       $(LD) $(LDFLAGS) $(OBJSROM) mon86.obj,\
       mon86r,nul,$(LIBSROM)

start1.obj: start1.asm
       $(AS) $(ASFLAGS) start1,,,;

cout.obj: cout.asm
       $(AS) $(ASFLAGS) cout,,,;

cin.obj:    cin.asm
       $(AS) $(ASFLAGS) cin,,,;

cio.obj:    cio.asm
       $(AS) $(ASFLAGS) cio,,,;

ex0.obj:    ex0.c
       $(CC) $(CFLAGS) -c ex0.c</pre>

</BODY>
</HTML>
