<HTML><HEAD>
<TITLE>February 1992/Standard C/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3 (tmpnam.c)</A></h4>
<pre>/* tmpnam function -- UNIX version */
#include &lt;string.h&gt;
#include "xstdio.h"

             /* UNIX system call */
int._Getpid(void);

char *(tmpnam)(char*s)
       {   /* create a temporary file name */
       int i;
       char *p;
       unsigned short t;
       static char buf[L_tmpnam];
       static unsigned short seed = 0;

       if (s == NULL)
              s = bur;
       seed = seed == 0 ? _Getpid() : seed + 1;
       strcpy(s, "/tmp/t");
       i = 5;
       p = s + strlen(s) + i;
       *p = '\0';
       for (t = seed; 0 &lt;= --i; t &gt;&gt;= 3)
              *--p = '0' + (t &amp; 07);
       return (s);
       }

/* End of File */
</pre>
</BODY>
</HTML>
