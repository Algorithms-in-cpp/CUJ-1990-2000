<HTML><HEAD>
<TITLE>January 1995/Code Capsules/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5 <I>A Function that copies a file via block I/0</I></A></h4>
<pre>/* copy2.c */
#include &lt;stdio.h&gt;

int copy(FILE *dest, FILE *source)
{
   size_t count;
   static char buf[BUFSIZ];

   while (!feof(source))
   {
      count = fread(buf,l,BUFSIZ,source);
      if (ferror(source))
         return EOF;
      If (fwrite(buf,l,count,dest) != count)
         return EOF;

   }
   return 0;
}

/* End of File */
</pre>
</BODY>
</HTML>
