<HTML><HEAD>
<TITLE>January 1995/Code Capsules/Listing 12</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 12 <I>Uses </I>strstr<I> to find substrings</I></A></h4>
<pre>/* find.c:  Extract lines from a file */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

main(int argc, char *argv[])
{
    char line[BUFSIZ];
    char *search_str;
    int lineno = 0;

    if (argc == 1)
       return EXIT_FAILURE;
       /* Search string required */
    else
       search_str = argv[l];

    while (gets(line))
    {
       ++lineno;
       if (strstr(line,search_str))
          printf("%d: %s\n",lineno,line);
    }

    return EXIT_SUCCESS;
}

/*Results from the command
  "find str &lt;find.c": */
5: #include &lt;string.h&gt;
12:      char *search_str;
16:        return EXIT_FAILURE;
18:        search_str = argv[l];
23:        if (strstr(line,search_str))

/* End of File */
</pre>
</BODY>
</HTML>
