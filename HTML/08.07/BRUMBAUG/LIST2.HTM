<HTML><HEAD><TITLE>July 1990/Object-Oriented Programming In C/Listing 2</TITLE></HEAD><BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<h4><A name="0177_00D9"><A name="0177_00D9">Listing 2<A name="0177_00D9"></h4><P>
<pre>CLASS *new_CLASS() {
   SUPER_CLASS *s;
   CLASS *this;
   
   /*  Construct super class */
   s = new_SUPER_CLASS();
   
   /*  Allocate memory for this object */
   this = calloc(1,sizeof(CLASS));
    
    /*  Inherit everything you can from the superclass */
   memmove(this,s,sizeof(CLASS);
   
   /*  We're done with the superclass's memory */
   free(s);
   
   /*  Assign methods to object */
      this-&gt;f1 = f1;
   
   /*  Inialize attributes here. Open files, allocate etc.*/
    
    return(this);
}

void destroy_CLASS(CLASS *this) {
   /*  Free any specific data: */
      free(this-&gt;p);
   
   /*  Close any files specific to this class: */
      fclose(this-&gt;file);
   
   /*  Call the superclass's destructor */
      destroy_SUPER_CLASS(this);

}

void destroy_SUPER_CLASS(SUPER_CLASS *this) {
   free(this);
}
</pre>
</BODY>
</HTML>
